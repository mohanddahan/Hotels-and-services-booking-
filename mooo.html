<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="نظام حجز الفنادق اليمني - احجز فندقك في أي محافظة يمنية بسهولة وأمان">
    <meta name="keywords" content="فنادق يمن, حجز فندق, سياحة يمن, عروض فنادق, غرف فندقية">
    <title>نظام حجز الفنادق اليمني | Yemen Hotels Booking</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
<!-- إضافة زر القائمة المنسدلة للهواتف -->
<button id="mobileMenuBtn" class="mobile-menu-btn">☰</button>
<div id="mobileMenu" class="mobile-menu">
    <a href="#" id="homeLinkMobile">الرئيسية</a>
    <a href="#" id="servicesLinkMobile">الخدمات</a>
</div>

<!-- تحسين الصور للجوال -->
<picture>
    <source media="(max-width: 768px)" srcset="images/hotel-mobile.jpg">
    <img src="images/hotel-desktop.jpg" alt="صورة الفندق" loading="lazy">
</picture>


<style>
        :root {
            /* الثيم الفاتح (الافتراضي) */
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --info-color: #2980b9;
            --background-color: #f8f9fa;
            --text-color: #333;
            --light-gray: #ecf0f1;
            --dark-gray: #7f8c8d;
            --card-bg: white;
            --border-color: #ddd;
            --shadow-color: rgba(0,0,0,0.1);
            --input-bg: white;
            --icon-color: #555;
            --overlay-color: rgba(0,0,0,0.7);
            --transition-speed: 0.3s;
        }

        [data-theme="dark"] {
            /* الثيم الغامق */
            --primary-color: #3498db;
            --secondary-color: #1abc9c;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --info-color: #3498db;
            --background-color: #121212;
            --text-color: #f0f0f0;
            --light-gray: #2d2d2d;
            --dark-gray: #bdc3c7;
            --card-bg: #1e1e1e;
            --border-color: #444;
            --shadow-color: rgba(0,0,0,0.3);
            --input-bg: #252525;
            --icon-color: #bbb;
            --overlay-color: rgba(0,0,0,0.85);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Tajawal', sans-serif;
            transition: background-color var(--transition-speed) ease, 
                        color var(--transition-speed) ease, 
                        border-color var(--transition-speed) ease;
        }

        body {
            background: var(--background-color);
            min-height: 100vh;
            color: var(--text-color);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        /* تحسينات التمرير */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-gray);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }

        /* الشريط العلوي */
        .top-bar {
            background: var(--primary-color);
            color: white;
            padding: 10px 0;
            text-align: center;
            font-size: 0.9rem;
            box-shadow: 0 2px 5px var(--shadow-color);
        }

        .top-bar a {
            color: var(--secondary-color);
            text-decoration: none;
            margin: 0 10px;
        }

        /* تبديل الثيم */
        .theme-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 10px var(--shadow-color);
            transition: all var(--transition-speed) ease;
            font-size: 0.9rem;
        }

        .theme-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        .admin-btn {
            background: var(--warning-color);
        }

        /* الهيدر */
        header {
            background: var(--card-bg);
            padding: 20px 0;
            box-shadow: 0 2px 10px var(--shadow-color);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo img {
            height: 40px;
            width: auto;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

.nav-links {
    display: flex;
    gap: 20px;
}

@media (max-width: 768px) {
    .nav-links {
        display: none;
    }
    
    .mobile-menu-btn {
        display: block;
    }
}

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all var(--transition-speed) ease;
        }

        .nav-links a:hover {
            color: var(--secondary-color);
            background: var(--light-gray);
        }

        /* المحتوى الرئيسي */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* العناوين */
        h1 {
            text-align: center;
            color: var(--primary-color);
            margin: 30px 0;
            font-size: 2.2rem;
            position: relative;
            padding-bottom: 15px;
        }

        h1:after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 50%;
            transform: translateX(50%);
            width: 100px;
            height: 3px;
            background: var(--secondary-color);
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--primary-color);
            margin: 15px 0 10px;
            font-size: 1.4rem;
        }

        /* خطوات الحجز */
        .steps-container {
            position: relative;
            margin: 40px 0;
        }

        .progress-bar {
            position: absolute;
            top: 50px;
            right: 0;
            left: 0;
            height: 5px;
            background: var(--light-gray);
            z-index: 1;
            border-radius: 5px;
        }

        .progress {
            height: 100%;
            background: var(--secondary-color);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 2;
            margin-bottom: 40px;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--light-gray);
            color: var(--dark-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 3px solid var(--light-gray);
            transition: all var(--transition-speed) ease;
        }
        
        .step-circle.active {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .step-circle.completed {
            background: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }

        .step-label {
            position: absolute;
            top: 60px;
            text-align: center;
            width: 100px;
            right: -25px;
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .step-circle.active + .step-label,
        .step-circle.completed + .step-label {
            color: var(--text-color);
            font-weight: 500;
        }

        /* محتوى الخطوات */
        .step-content {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px var(--shadow-color);
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.5s ease;
            border: 1px solid var(--border-color);
        }

        .step-content.active { 
            display: block; 
        }

        /* عناصر النموذج */
        .dropdown {
            width: 100%;
            padding: 15px 20px;
            margin: 20px 0;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1rem;
            background: var(--input-bg);
            color: var(--text-color);
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%237f8c8d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
            transition: all var(--transition-speed) ease;
        }

        [data-theme="dark"] .dropdown {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23bdc3c7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        }

        .dropdown:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* أزرار التنقل */
        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: flex-end;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .next-btn {
            background: var(--success-color);
            color: white;
        }

        .back-btn {
            background: var(--dark-gray);
            color: white;
        }

        .submit-btn {
            background: var(--success-color);
            color: white;
            font-weight: bold;
        }

        .payment-btn {
            background: var(--info-color);
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px var(--shadow-color);
            opacity: 0.9;
        }

        button:disabled {
            background: var(--dark-gray) !important;
            cursor: not-allowed;
            opacity: 0.7;
        }

        button:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* بطاقات العرض */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .hotel-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            position: relative;
        }

        .hotel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .hotel-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--warning-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        .hotel-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 3px solid var(--secondary-color);
        }

        .hotel-info {
            padding: 20px;
        }

        .hotel-info h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
            min-height: 60px;
        }

        .hotel-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        .hotel-location {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .hotel-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--warning-color);
            font-weight: bold;
        }

        .hotel-description {
            margin: 10px 0;
            font-size: 0.95rem;
            color: var(--text-color);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 70px;
        }

        .hotel-price {
            font-weight: bold;
            color: var(--success-color);
            font-size: 1.2rem;
            margin: 10px 0;
            text-align: left;
        }

        .hotel-price small {
            font-size: 0.9rem;
            color: var(--dark-gray);
            font-weight: normal;
        }

        .hotel-info button {
            width: 100%;
            margin-top: 15px;
            background: var(--secondary-color);
            justify-content: center;
        }

        /* تفاصيل الغرف */
        .room-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: 0 3px 10px var(--shadow-color);
            transition: all var(--transition-speed) ease;
        }

        .room-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .room-header {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .room-image {
            width: 300px;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            flex: 1;
            min-width: 300px;
        }

        .room-details {
            flex: 2;
            min-width: 300px;
        }

        .room-title {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .room-price {
            font-size: 1.2rem;
            color: var(--success-color);
            margin-bottom: 15px;
        }

        .room-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .room-meta-item {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--dark-gray);
        }

        .room-features {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .feature-category h5 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .feature-list {
            list-style-type: none;
            margin-right: 10px;
        }

        .feature-list li {
            padding: 3px 0;
            display: flex;
            align-items: center;
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .feature-list li:before {
            content: "•";
            color: var(--secondary-color);
            margin-left: 5px;
            font-size: 1.2rem;
        }

        .room-book-btn {
            width: 100%;
            padding: 12px;
            background: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .room-book-btn:hover {
            background: #219653;
        }

        /* نموذج الحجز */
        .booking-form {
            display: grid;
            gap: 25px;
            margin-top: 30px;
        }

        .form-section {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px var(--shadow-color);
            border: 1px solid var(--border-color);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .date-inputs div {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        input, textarea, select {
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            width: 100%;
            font-size: 1rem;
            background: var(--input-bg);
            color: var(--text-color);
            transition: all var(--transition-speed) ease;
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* ملخص الحجز */
        .booking-summary {
            background: var(--light-gray);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }

        .booking-summary h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed var(--border-color);
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: var(--success-color);
            font-size: 1.1rem;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--border-color);
        }

        /* صندوق البحث */
        .search-box {
            display: flex;
            margin-bottom: 20px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px var(--shadow-color);
        }

        .search-box input {
            flex: 1;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: none;
        }

        .search-box button {
            padding: 0 20px;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            background: var(--secondary-color);
            color: white;
            border: none;
        }

        /* نافذة الدفع */
        .payment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay-color);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(5px);
        }

        .payment-content {
            background: var(--card-bg);
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s ease;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .payment-method {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
        }

        .payment-method:hover {
            border-color: var(--secondary-color);
        }

        .payment-method.selected {
            border-color: var(--success-color);
            background: rgba(39, 174, 96, 0.1);
        }

        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }

        .payment-details {
            margin-top: 20px;
            display: none;
        }

        .payment-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* مؤشر التحميل */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay-color);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .loader {
            border: 5px solid var(--light-gray);
            border-top: 5px solid var(--secondary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-overlay p {
            font-size: 1.2rem;
            color: white;
        }

        /* رسائل الخطأ */
        .input-error {
            border-color: var(--error-color) !important;
            animation: shake 0.5s;
        }

        .error-message {
            color: var(--error-color);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        /* الفوتر */
        footer {
            background: var(--primary-color);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .footer-logo img {
            height: 40px;
        }

        .footer-logo-text {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .footer-about p {
            margin-bottom: 15px;
            line-height: 1.7;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-links a {
            color: white;
            background: rgba(255,255,255,0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-speed) ease;
        }

        .social-links a:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
        }

        .footer-links h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-links h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--secondary-color);
            padding-right: 5px;
        }

        .footer-contact .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .footer-contact i {
            color: var(--secondary-color);
            font-size: 1.2rem;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            color: #ddd;
        }

        /* الأيقونات */
        i.fas, i.far, i.fab {
            color: var(--icon-color);
        }

        /* لوحة التحكم الإدارية */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--card-bg);
            box-shadow: -5px 0 15px var(--shadow-color);
            z-index: 9998;
            transition: right 0.3s ease;
            padding: 20px;
            overflow-y: auto;
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all var(--transition-speed) ease;
        }

        .admin-tab.active {
            border-bottom-color: var(--secondary-color);
            color: var(--secondary-color);
            font-weight: bold;
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
        }

        .admin-form-group {
            margin-bottom: 15px;
        }

        .admin-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .admin-list-item {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-list-item:last-child {
            border-bottom: none;
        }

        .admin-list-item:hover {
            background-color: var(--light-gray);
        }

        .admin-actions {
            display: flex;
            gap: 8px;
        }

        .admin-btn-small {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .edit-btn {
            background: var(--info-color);
            color: white;
        }

        .delete-btn {
            background: var(--error-color);
            color: white;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px var(--shadow-color);
        }
        
        .stat-card h4 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-card p {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        /* الرسائل الناجحة */
        .success-message {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--success-color);
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 3px 10px var(--shadow-color);
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        /* التأثيرات الحركية */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* أنماط صفحة الخدمات */
        .services-container {
            display: none;
        }

        .services-container.active {
            display: block;
        }

        .filters-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 250px;
        }

        .filter-group label {
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .filter-group select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--card-bg);
            color: var(--text-color);
        }

        .services-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .service-tab {
            padding: 12px 25px;
            border-radius: 30px;
            background: var(--light-gray);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-tab.active {
            background: var(--secondary-color);
            color: white;
        }

        .service-tab:hover:not(.active) {
            background: var(--border-color);
        }

        .service-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow-color);
        }

        .service-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 3px solid var(--secondary-color);
        }

        .service-info {
            padding: 20px;
        }

        .service-info h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .service-location {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--dark-gray);
            margin-bottom: 10px;
        }

        .service-location i {
            color: var(--secondary-color);
        }

        .service-description {
            margin: 10px 0;
            font-size: 0.95rem;
            color: var(--text-color);
        }

        .service-features {
            list-style-type: none;
            margin: 15px 0;
        }

        .service-features li {
            padding: 5px 0;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .service-features li:before {
            content: "•";
            color: var(--secondary-color);
            font-size: 1.2rem;
            margin-left: 5px;
        }

        .service-price {
            font-weight: bold;
            color: var(--success-color);
            font-size: 1.2rem;
            margin: 15px 0;
        }

        .service-price small {
            font-size: 0.9rem;
            color: var(--dark-gray);
            font-weight: normal;
        }

        .service-btn {
            width: 100%;
            padding: 12px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .service-btn:hover {
            background: var(--primary-color);
        }

        .service-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay-color);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .service-modal-content {
            background: var(--card-bg);
            width: 90%;
            max-width: 600px;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }

        .close-service-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        /* تمييز القسم عند الوصول إليه */
        .service-section:target {
            animation: highlight 1.5s ease;
            border-left: 4px solid var(--secondary-color);
            padding-left: 15px;
        }

        @keyframes highlight {
            from { background-color: rgba(52, 152, 219, 0.2); }
            to { background-color: transparent; }
        }

        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .container { 
                padding: 10px; 
            }
            
            .step-content { 
                padding: 20px; 
            }
            
            .grid { 
                grid-template-columns: 1fr; 
            }
            
            .btn-group { 
                flex-direction: column; 
            }
            
            button { 
                width: 100%; 
            }
            
            .room-header { 
                flex-direction: column; 
            }
            
            .room-image { 
                width: 100%; 
                min-width: auto; 
            }
            
            .features-grid { 
                grid-template-columns: 1fr; 
            }
            
            .date-inputs { 
                grid-template-columns: 1fr; 
            }
            
            .theme-switcher {
                top: 10px;
                left: 10px;
                flex-direction: column;
            }
            
            #themeToggle {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .steps {
                flex-wrap: wrap;
                gap: 10px;
                justify-content: center;
            }
            
            .step-circle {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }
            
            .step-label {
                position: static;
                width: auto;
                margin-top: 5px;
            }
            
            .progress-bar {
                display: none;
            }
            
            .admin-panel {
                width: 100%;
                right: -100%;
            }
            
            .payment-content {
                width: 95%;
                padding: 20px;
            }
            
            .payment-methods {
                grid-template-columns: 1fr 1fr;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .footer-links h3:after {
                right: 50%;
                transform: translateX(50%);
            }
            
            .social-links {
                justify-content: center;
            }
            
            .footer-contact .contact-item {
                justify-content: center;
            }
        }

        /* تعديلات للشاشات الصغيرة جدًا */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
                margin: 20px 0;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .step-circle {
                width: 35px;
                height: 35px;
                font-size: 0.8rem;
            }
            
            .dropdown, input, textarea, select {
                padding: 10px 12px;
                font-size: 0.95rem;
            }
            
            button {
                padding: 10px 20px;
                font-size: 0.95rem;
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
            
            .admin-tabs {
                flex-wrap: wrap;
            }
            
            .admin-tab {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
          .small-btn {
    padding: 3px 8px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background: var(--light-gray);
    cursor: pointer;
    font-size: 0.8rem;
    margin: 0 3px;
}

.small-btn.active {
    background: var(--success-color);
    color: white;
}

/* أنماط القائمة المنسدلة للهواتف */
.mobile-menu-btn {
    display: none;
    font-size: 1.8rem;
    background: none;
    border: none;
    cursor: pointer;
    padding: 10px;
}

.mobile-menu {
    display: none;
    flex-direction: column;
    background: var(--card-bg);
    position: absolute;
    top: 70px;
    right: 10px;
    z-index: 1000;
    border-radius: 5px;
    box-shadow: 0 3px 10px var(--shadow-color);
}

/* تحسين الأزرار للشاشات الصغيرة */
@media (max-width: 768px) {
    button, .btn {
        min-width: 44px;
        min-height: 44px;
        padding: 12px 20px;
    }
}

/* إخفاء العناصر غير الضرورية على الجوال */
@media (max-width: 480px) {
    .desktop-only {
        display: none !important;
    }
}
/ *التكبير والتصغير الغير مقصود لل ios */
input, select, textarea {
    font-size: 16px;
    touch-action: manipulation;
}
/*تحسين شريط التمرير للجوال*/
::-webkit-scrollbar {
    width: 5px;
}

::-webkit-scrollbar-thumb {
    background: var(--secondary-color);
}
/*جعل الجداول متجاوبة*/
@media (max-width: 768px) {
    table {
        display: block;
        overflow-x: auto;
    }
}

        }
    </style>
</head>
<body>
    <!-- شريط المعلومات العلوي -->
    <div class="top-bar">
        <span>لديك استفسار؟ اتصل بنا: 782307215 | البريد الإلكتروني: mohanddahan3@gmail.com</span>
    </div>
    
    <!-- تبديل الثيم ولوحة التحكم -->
    <div class="theme-switcher">
        <button id="themeToggle" class="theme-btn">
            <i class="fas fa-moon"></i> تغيير الثيم
        </button>
        <button id="adminToggle" class="theme-btn admin-btn">
            <i class="fas fa-cog"></i> لوحة التحكم
        </button>
    </div>
    
    <!-- الهيدر -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">
                <span class="logo-text">فنادق اليمن</span>
            </a>
            <!-- من هذا -->
<nav class="nav-links">
    <a href="#" id="homeLink">الرئيسية</a>
    <a href="#" id="servicesLink">الخدمات</a>
</nav>

<!-- إلى هذا -->
<nav class="nav-links desktop-only">
    <a href="#" id="homeLink">الرئيسية</a>
    <a href="#" id="servicesLink">الخدمات</a>
</nav>
        </div>
    </header>
    
    <!-- المحتوى الرئيسي -->
    <div class="container">
        <!-- واجهة حجز الفنادق -->
        <div id="hotelsInterface">
            <h1>نظام حجز الفنادق اليمني 🏨</h1>
            <p style="text-align: center; margin-bottom: 30px; color: var(--dark-gray);">
                اكتشف أفضل الفنادق في اليمن واحجز إقامتك بسهولة وأمان. اختر من بين مجموعة واسعة من الفنادق في جميع المحافظات اليمنية.
            </p>

            <!-- خطوات الحجز -->
            <div class="steps-container">
                <div class="progress-bar">
                    <div class="progress" id="bookingProgress"></div>
                </div>
                
                <div class="steps">
                    <div class="step-circle active" id="stepCircle1">1</div>
                    <span class="step-label"> اختر المحافظة </span>
                    
                    <div class="step-circle" id="stepCircle2">2</div>
                    <span class="step-label"> اختر المنطقة </span>
                    
                    <div class="step-circle" id="stepCircle3">3</div>
                    <span class="step-label"> اختر الفندق </span>
                    
                    <div class="step-circle" id="stepCircle4">4</div>
                    <span class="step-label"> اختر الغرفة </span>
                    
                    <div class="step-circle" id="stepCircle5">5</div>
                    <span class="step-label"> إتمام الحجز </span>
                </div>
            </div>

            <!-- محتوى الخطوات -->
            <div class="step-content active" id="step1">
                <h2><i class="fas fa-map-marker-alt"></i> الخطوة 1: اختيار المحافظة</h2>
                <p>اختر المحافظة التي ترغب بالإقامة فيها من القائمة التالية:</p>
                <select id="governorateSelect" class="dropdown">
                    <option value="">-- اختر محافظتك --</option>
                </select>
                <div class="btn-group">
                    <button class="next-btn" onclick="nextStep('step2')" disabled>التالي <i class="fas fa-arrow-left"></i></button>
                </div>
            </div>

            <div class="step-content" id="step2">
                <h2><i class="fas fa-map-marked-alt"></i> الخطوة 2: اختيار المنطقة</h2>
                <p>اختر المنطقة أو المدينة التي ترغب بالإقامة فيها:</p>
                <select id="regionSelect" class="dropdown" disabled>
                    <option value="">-- اختر منطقتك --</option>
                </select>
                <div class="btn-group">
                    <button class="back-btn" onclick="prevStep()"><i class="fas fa-arrow-right"></i> العودة</button>
                    <button class="next-btn" onclick="nextStep('step3')" disabled>التالي <i class="fas fa-arrow-left"></i></button>
                </div>
            </div>

            <div class="step-content" id="step3">
                <h2><i class="fas fa-hotel"></i> الخطوة 3: الفنادق المتاحة</h2>
                <p>اختر الفندق الذي يناسبك من القائمة التالية:</p>
                <div class="search-box">
                    <input type="text" id="hotelSearch" placeholder="ابحث عن فندق...">
                    <button onclick="searchHotels()"><i class="fas fa-search"></i> بحث</button>
                </div>
                <div class="grid" id="hotels"></div>
                <div class="btn-group">
                    <button class="back-btn" onclick="prevStep()"><i class="fas fa-arrow-right"></i> العودة</button>
                </div>
            </div>

            <div class="step-content" id="step4">
                <h2><i class="fas fa-bed"></i> الخطوة 4: تفاصيل الغرف</h2>
                <div id="rooms"></div>
                <div class="btn-group">
                    <button class="back-btn" onclick="prevStep()"><i class="fas fa-arrow-right"></i> العودة</button>
                </div>
            </div>
            
            <div class="step-content" id="step5">
                <h2><i class="fas fa-receipt"></i> الخطوة 5: إتمام الحجز</h2>
                <form class="booking-form" id="bookingForm">
                    <div class="form-section">
                        <h3><i class="fas fa-user-circle"></i> المعلومات الشخصية</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="fullName">الاسم الثلاثي</label>
                                <input type="text" id="fullName" placeholder="الاسم الثلاثي" required>
                                <div class="error-message" id="nameError">الرجاء إدخال الاسم الثلاثي</div>
                            </div>
                            <div class="form-group">
                                <label for="phoneInput">رقم الجوال</label>
                                <input type="tel" id="phoneInput" placeholder="7xxxxxxxx" 
                                       pattern="7[0-9]{8}" title="رقم يمني صحيح (يبدأ ب 7 ويتكون من 9 أرقام)" required>
                                <div class="error-message" id="phoneError">الرجاء إدخال رقم جوال صحيح</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="email">البريد الإلكتروني (اختياري)</label>
                            <input type="email" id="email" placeholder="example@domain.com">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-calendar-alt"></i> تفاصيل الإقامة</h3>
                        <div class="date-inputs">
                            <div class="form-group">
                                <label for="checkinDate">تاريخ الوصول:</label>
                                <input type="date" id="checkinDate" required>
                                <div class="error-message" id="dateError">الرجاء اختيار تاريخ الوصول</div>
                            </div>
                            <div class="form-group">
                                <label for="nights">عدد الليالي:</label>
                                <input type="number" id="nights" placeholder="عدد الليالي" min="1" value="1" required>
                            </div>
                            <div class="form-group">
                                <label for="guests">عدد الأشخاص:</label>
                                <input type="number" id="guests" placeholder="عدد الأشخاص" min="1" value="1" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-sticky-note"></i> ملاحظات إضافية</h3>
                        <textarea id="notes" placeholder="ملاحظات خاصة (نوع السرير، طلبات خاصة، إلخ)" rows="3"></textarea>
                    </div>

                    <div class="booking-summary">
                        <h3><i class="fas fa-file-invoice"></i> ملخص الحجز</h3>
                        <div id="summaryDetails"></div>
                    </div>
<div class="btn-group">
    <button class="back-btn" onclick="prevStep()"><i class="fas fa-arrow-right"></i> العودة</button>
    <button type="submit" class="submit-btn">
        <i class="fab fa-whatsapp"></i> تأكيد الحجز
    </button>
</div>
                </form>
            </div>
        </div>

        <!-- واجهة الخدمات -->
        <div class="services-container" id="servicesInterface">
            <h1>الخدمات الإضافية 🛎️</h1>
            <p style="text-align: center; margin-bottom: 30px; color: var(--dark-gray);">
                استفد من خدماتنا الإضافية لجعل إقامتك أكثر راحة ومتعة
            </p>

            <!-- فلتر البحث حسب المحافظة ونوع الخدمة -->
            <div class="filters-container">
                <div class="filter-group">
                    <label for="serviceGovernorate">المحافظة</label>
                    <select id="serviceGovernorate" onchange="filterServices()">
                        <option value="all">جميع المحافظات</option>
                        <option value="صنعاء">صنعاء</option>
                        <option value="عدن">عدن</option>
                        <option value="تعز">تعز</option>
                        <option value="حضرموت">حضرموت</option>
                        <option value="الحديدة">الحديدة</option>
                        <option value="إب">إب</option>
                        <option value="المحويت">المحويت</option>
                        <option value="ذمار">ذمار</option>
                        <option value="حجة">حجة</option>
                        <option value="المهرة">المهرة</option>
                        <option value="الجوف">الجوف</option>
                        <option value="شبوة">شبوة</option>
                        <option value="صعدة">صعدة</option>
                        <option value="سقطرى">سقطرى</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="serviceType">نوع الخدمة</label>
                    <select id="serviceType" onchange="filterServices()">
                        <option value="all">جميع الخدمات</option>
                        <option value="تأجير السيارات">تأجير السيارات</option>
                        <option value="جولات سياحية">جولات سياحية</option>
                        <option value="خدمات المطار">خدمات المطار</option>
                    </select>
                </div>
            </div>

            <!-- عرض الخدمات -->
            <div class="services-tabs">
                <div class="service-tab active" data-service="all">
                    <i class="fas fa-list"></i> الكل
                </div>
                <div class="service-tab" data-service="تأجير السيارات">
                    <i class="fas fa-car"></i> تأجير السيارات
                </div>
                <div class="service-tab" data-service="جولات سياحية">
                    <i class="fas fa-map-marked-alt"></i> جولات سياحية
                </div>
                <div class="service-tab" data-service="خدمات المطار">
                    <i class="fas fa-plane"></i> خدمات المطار
                </div>
            </div>

            <div class="grid" id="servicesContainer"></div>
        </div>
    </div>


    <!-- نافذة حجز الخدمة -->
    <div class="service-modal" id="serviceBookingModal">
        <div class="service-modal-content">
            <span class="close-service-modal" onclick="closeServiceModal()">&times;</span>
            <h2 id="serviceModalTitle"></h2>
            <div id="serviceModalContent"></div>
        </div>
    </div>

    <!-- لوحة التحكم الإدارية -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h3><i class="fas fa-cog"></i> لوحة التحكم الإدارية</h3>
            <div>
                <button class="back-btn" onclick="toggleAdminPanel()">
                    <i class="fas fa-times"></i> إغلاق
                </button>
                <button class="next-btn" onclick="location.reload()" style="margin-right: 10px;">
                    <i class="fas fa-sync-alt"></i> تحديث
                </button>
            </div>
        </div>
        
        <div class="admin-tabs">
            <div class="admin-tab active" onclick="switchAdminTab('bookings')">الحجوزات</div>
            <div class="admin-tab" onclick="switchAdminTab('hotels')">الفنادق</div>
            <div class="admin-tab" onclick="switchAdminTab('rooms')">الغرف</div>
            <div class="admin-tab" onclick="switchAdminTab('services')">الخدمات</div>
            <div class="admin-tab" onclick="switchAdminTab('settings')">الإعدادات</div>
        </div>
        
        <div class="admin-content active" id="bookingsTab">
            <h4>إدارة الحجوزات</h4>
            <div class="admin-list" id="bookingsList">
                <!-- سيتم تعبئتها بالحجوزات -->
            </div>
            <div class="btn-group" style="margin-top: 15px;">
                <button class="next-btn" onclick="exportBookings()">
                    <i class="fas fa-file-export"></i> تصدير الحجوزات
                </button>
            </div>
        </div>
        
        <div class="admin-content" id="hotelsTab">
            <h4><i class="fas fa-hotel"></i> إدارة الفنادق</h4>
            
            <div class="form-section">
                <h5><i class="fas fa-plus-circle"></i> إضافة/تعديل فندق</h5>
                <input type="hidden" id="editHotelId">
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="hotelName">اسم الفندق*</label>
                        <input type="text" id="hotelName" placeholder="اسم الفندق" required>
                    </div>
                    <div class="admin-form-group">
                        <label for="hotelGovernorate">المحافظة*</label>
                        <select id="hotelGovernorate" class="dropdown" required>
                            <option value="">اختر المحافظة</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="hotelRegion">المنطقة*</label>
                        <select id="hotelRegion" class="dropdown" required disabled>
                            <option value="">اختر المنطقة</option>
                        </select>
                    </div>
                    <div class="admin-form-group">
                        <label for="hotelRating">التقييم (1-5)</label>
                        <select id="hotelRating" class="dropdown">
                            <option value="5">⭐⭐⭐⭐⭐</option>
                            <option value="4">⭐⭐⭐⭐</option>
                            <option value="3">⭐⭐⭐</option>
                            <option value="2">⭐⭐</option>
                            <option value="1">⭐</option>
                        </select>
                    </div>
                </div>
                
                <div class="admin-form-group">
                    <label for="hotelImage">رابط صورة الفندق</label>
                    <input type="text" id="hotelImage" placeholder="https://example.com/hotel.jpg">
                </div>
                
                <div class="admin-form-group">
                    <label for="hotelDescription">وصف الفندق</label>
                    <textarea id="hotelDescription" rows="3" placeholder="وصف مختصر عن الفندق..."></textarea>
                </div>
                
                <div class="btn-group">
                    <button class="back-btn" onclick="resetHotelForm()">
                        <i class="fas fa-times"></i> إلغاء
                    </button>
                    <button class="submit-btn" onclick="saveHotel()">
                        <i class="fas fa-save"></i> حفظ الفندق
                    </button>
                </div>
            </div>
            
            <div class="form-section">
                <h5><i class="fas fa-list"></i> قائمة الفنادق</h5>
                <div class="search-box">
                    <input type="text" id="searchHotels" placeholder="ابحث عن فندق...">
                    <button onclick="searchAdminHotels()"><i class="fas fa-search"></i></button>
                </div>
                <div class="admin-list" id="hotelsList"></div>
            </div>
        </div>
        
        <div class="admin-content" id="roomsTab">
            <h4><i class="fas fa-bed"></i> إدارة الغرف</h4>
            
            <div class="form-section">
                <h5><i class="fas fa-plus-circle"></i> إضافة/تعديل غرفة</h5>
                <input type="hidden" id="editRoomId">
                
                <div class="admin-form-group">
                    <label for="roomHotel">الفندق*</label>
                    <select id="roomHotel" class="dropdown" required onchange="loadHotelRooms(this.value)">
                        <option value="">اختر الفندق</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="roomType">نوع الغرفة*</label>
                        <input type="text" id="roomType" placeholder="مثل: جناح فاخر" required>
                    </div>
                    <div class="admin-form-group">
                        <label for="roomPrice">السعر ($)*</label>
                        <input type="number" id="roomPrice" placeholder="السعر بالدولار" min="1" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="roomCapacity">السعة (أشخاص)*</label>
                        <input type="number" id="roomCapacity" placeholder="عدد الأشخاص" min="1" required>
                    </div>
                    <div class="admin-form-group">
                        <label for="roomBeds">نوع الأسرة</label>
                        <input type="text" id="roomBeds" placeholder="مثل: سرير كينج + سرير فردي">
                    </div>
                </div>
                
                <div class="admin-form-group">
                    <label for="roomImage">رابط صورة الغرفة</label>
                    <input type="text" id="roomImage" placeholder="https://example.com/room.jpg">
                </div>
                
                <div class="admin-form-group">
                    <label for="roomAmenities">مميزات الغرفة (افصل بفواصل)</label>
                    <textarea id="roomAmenities" rows="2" placeholder="واي فاي, تلفزيون, ميني بار"></textarea>
                </div>
                
                <div class="btn-group">
                    <button class="back-btn" onclick="resetRoomForm()">
                        <i class="fas fa-times"></i> إلغاء
                    </button>
                    <button class="submit-btn" onclick="saveRoom()">
                        <i class="fas fa-save"></i> حفظ الغرفة
                    </button>
                </div>
            </div>
            
            <div class="form-section">
                <h5><i class="fas fa-list"></i> قائمة الغرف</h5>
                <div class="search-box">
                    <input type="text" id="searchRooms" placeholder="ابحث عن غرفة...">
                    <button onclick="searchAdminRooms()"><i class="fas fa-search"></i></button>
                </div>
                <div class="admin-list" id="roomsList"></div>
            </div>
        </div>
        
        <!-- قسم إدارة الخدمات في لوحة التحكم -->
        <div class="admin-content" id="servicesTab">
            <h4><i class="fas fa-concierge-bell"></i> إدارة الخدمات</h4>
            
            <div class="form-section">
                <h5><i class="fas fa-plus-circle"></i> إضافة/تعديل خدمة</h5>
                <input type="hidden" id="editServiceId">
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="serviceCategory">نوع الخدمة*</label>
                        <select id="serviceCategory" class="dropdown" required>
                            <option value="">اختر نوع الخدمة</option>
                            <option value="تأجير السيارات">تأجير السيارات</option>
                            <option value="جولات سياحية">جولات سياحية</option>
                            <option value="خدمات المطار">خدمات المطار</option>
                        </select>
                    </div>
                    <div class="admin-form-group">
                        <label for="serviceGovernorate">المحافظة*</label>
                        <select id="serviceGovernorate" class="dropdown" required>
                            <option value="">اختر المحافظة</option>
                            <option value="صنعاء">صنعاء</option>
                            <option value="عدن">عدن</option>
                            <option value="تعز">تعز</option>
                            <option value="حضرموت">حضرموت</option>
                            <option value="الحديدة">الحديدة</option>
                            <option value="إب">إب</option>
                            <option value="المحويت">المحويت</option>
                            <option value="ذمار">ذمار</option>
                            <option value="حجة">حجة</option>
                            <option value="المهرة">المهرة</option>
                            <option value="الجوف">الجوف</option>
                            <option value="شبوة">شبوة</option>
                            <option value="صعدة">صعدة</option>
                            <option value="سقطرى">سقطرى</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="serviceName">اسم الخدمة*</label>
                        <input type="text" id="serviceName" placeholder="اسم الخدمة" required>
                    </div>
                    <div class="admin-form-group">
                        <label for="servicePrice">السعر ($)*</label>
                        <input type="number" id="servicePrice" placeholder="السعر بالدولار" min="1" required>
                    </div>
                </div>
                
                <div class="admin-form-group">
                    <label for="serviceImage">رابط صورة الخدمة</label>
                    <input type="text" id="serviceImage" placeholder="https://example.com/service.jpg">
                </div>
                
                <div class="admin-form-group">
                    <label for="serviceDescription">وصف الخدمة</label>
                    <textarea id="serviceDescription" rows="2" placeholder="وصف مختصر للخدمة..."></textarea>
                </div>
                
                <div class="admin-form-group">
                    <label for="serviceFeatures">مميزات الخدمة (افصل بفواصل)</label>
                    <textarea id="serviceFeatures" rows="2" placeholder="مميزة 1, مميزة 2, مميزة 3"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="admin-form-group">
                        <label for="serviceCapacity">السعة (اختياري)</label>
                        <input type="number" id="serviceCapacity" placeholder="عدد الأشخاص أو السعة">
                    </div>
                    <div class="admin-form-group">
                        <label for="serviceWhatsapp">رقم واتساب المقدم*</label>
                        <input type="tel" id="serviceWhatsapp" placeholder="967xxxxxxxx" required>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button class="back-btn" onclick="resetServiceForm()">
                        <i class="fas fa-times"></i> إلغاء
                    </button>
                    <button class="submit-btn" onclick="saveService()">
                        <i class="fas fa-save"></i> حفظ الخدمة
                    </button>
                </div>
            </div>
            
            <div class="form-section">
                <h5><i class="fas fa-list"></i> قائمة الخدمات</h5>
                <div class="search-box">
                    <input type="text" id="searchServices" placeholder="ابحث عن خدمة...">
                    <button onclick="searchAdminServices()"><i class="fas fa-search"></i></button>
                </div>
                <div class="admin-list" id="servicesList"></div>
            </div>
        </div>
        
        <div class="admin-content" id="settingsTab">
            <h4>إعدادات النظام</h4>
            <div class="admin-form-group">
                <label for="adminSystemName">اسم النظام</label>
                <input type="text" id="adminSystemName" value="نظام حجز الفنادق اليمني">
            </div>
            <div class="admin-form-group">
                <label for="adminContactEmail">البريد الإلكتروني للاتصال</label>
                <input type="email" id="adminContactEmail" value="info@yemenhotels.com">
            </div>
            <div class="admin-form-group">
                <label for="adminContactPhone">رقم الاتصال</label>
                <input type="tel" id="adminContactPhone" value="123456789">
            </div>
            
            <div class="form-section" style="margin-top: 20px;">
                <h5><i class="fas fa-database"></i> نسخ احتياطي</h5>
                <div class="btn-group">
                    <button class="next-btn" onclick="exportData()">
                        <i class="fas fa-file-export"></i> تصدير جميع البيانات
                    </button>
                    <label for="importData" class="back-btn" style="cursor: pointer; text-align: center;">
                        <i class="fas fa-file-import"></i> استيراد البيانات
                        <input type="file" id="importData" accept=".json" style="display: none;" onchange="importData(event)">
                    </label>
                </div>
            </div>
            
            <div class="form-section" style="margin-top: 20px;">
                <h5><i class="fas fa-lock"></i> الأمان</h5>
                <button class="back-btn" onclick="changeAdminPassword()" style="width: 100%;">
                    <i class="fas fa-key"></i> تغيير كلمة المرور
                </button>
            </div>
        </div>
    </div>

    <!-- رسالة نجاح -->
    <div class="success-message" id="successMessage">
        <i class="fas fa-check-circle"></i> تمت العملية بنجاح!
    </div>

    <!-- مؤشر التحميل -->
    <div class="loading-overlay" id="loading">
        <div class="loader"></div>
        <p>جاري التحميل...</p>
    </div>

    <!-- الفوتر -->
    <footer>
        <div class="footer-container">
            <div class="footer-about">
                <div class="footer-logo">
                    <span class="footer-logo-text">فنادق اليمن</span>
                </div>
                <p>
                    نظام حجز الفنادق اليمني هو المنصة الأولى لحجز الفنادق في اليمن، نقدم لك تجربة حجز سهلة وآمنة لأفضل الفنادق في جميع المحافظات اليمنية.
                </p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            
            <div class="footer-links">
                <h3>خدماتنا</h3>
                <ul>
                    <li><a href="#" class="service-link" data-service="تأجير السيارات"><i class="fas fa-chevron-left"></i> تأجير السيارات</a></li>
                    <li><a href="#" class="service-link" data-service="جولات سياحية"><i class="fas fa-chevron-left"></i> جولات سياحية</a></li>
                    <li><a href="#" class="service-link" data-service="خدمات المطار"><i class="fas fa-chevron-left"></i> خدمات المطار</a></li>
                </ul>
            </div>
            
            <div class="footer-contact">
                <h3>اتصل بنا</h3>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>صنعاء، اليمن</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone-alt"></i>
                    <span>+967 123 456 789</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>mohanddahan3@gmail.com</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-clock"></i>
                    <span>24/7 خدمة العملاء</span>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 نظام حجز الفنادق اليمني. جميع الحقوق محفوظة.
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.js"></script>
    <script>
        // بيانات النظام
        let yemenData = {
            "صنعاء": {
                regions: {
                    "أرحب": { 
                        hotels: [
                            {
                                id: 1,
                                name: "فندق أرحب الجبلي 🏔️",
                                image: "https://source.unsplash.com/random/800x600?mountain-lodge",
                                rating: 4.5,
                                description: "فندق جبلي فاخر مع إطلالات بانورامية على المناظر الطبيعية الخلابة",
                                rooms: [
                                    {
                                        id: 101,
                                        type: "كابينة خشبية",
                                        price: 45,
                                        image: "https://source.unsplash.com/random/800x600?wooden-cabin",
                                        amenities: ["واي فاي مجاني", "تلفزيون", "مدفأة"],
                                        capacity: 3,
                                        beds: "سرير كينج + سرير فردي",
                                        size: "35 متر مربع",
                                        contents: {
                                            furniture: ["سرير كينج سايز", "أريكة", "طاولة عمل", "خزانة ملابس"],
                                            bathroom: ["حوض استحمام", "دش", "مجفف شعر", "أدوات استحمام مجانية"],
                                            electronics: ["تلفزيون 42 بوصة", "هاتف", "قنوات فضائية"],
                                            services: ["خدمة الغرف 24 ساعة", "تنظيف يومي", "إيقاظ"],
                                            other: ["تكييف هواء", "سفرة صغيرة", "مرآة كاملة الطول"]
                                        }
                                    },
                                    {
                                        id: 102,
                                        type: "جناح فاخر",
                                        price: 75,
                                        image: "https://source.unsplash.com/random/800x600?luxury-suite",
                                        amenities: ["غرفة معيشة", "مطبخ صغير", "حمام سبا", "ميني بار"],
                                        capacity: 4,
                                        beds: "سريرين كينج",
                                        size: "60 متر مربع",
                                        contents: {
                                            furniture: ["سريرين كينج", "أريكتان", "طاولة طعام", "خزانة ملابس كبيرة"],
                                            bathroom: ["جاكوزي", "دش بخاري", "مجفف شعر", "أدوات استحمام فاخرة"],
                                            electronics: ["تلفزيون 55 بوصة", "نظام صوتي", "هاتف"],
                                            services: ["خدمة بتلر", "تنظيف يومي", "إيقاظ", "خدمة غسيل الملابس"],
                                            other: ["تكييف هواء مركزي", "مطبخ صغير مجهز", "شرفة خاصة"]
                                        }
                                    }
                                ]
                            }
                        ] 
                    },
                    "الحيمة الخارجية": { hotels: [] },
                    "الحيمة الداخلية": { hotels: [] },
                    "بني حشيش": { hotels: [] },
                    "بني مطر": { hotels: [] },
                    "جحانة": { hotels: [] },
                    "خولان": { hotels: [] },
                    "سنحان وبني بهلول": { hotels: [] },
                    "نهم": { hotels: [] },
                    "بلاد الروس": { hotels: [] },
                    "مناخة": { hotels: [] },
                    "ريدة": { hotels: [] },
                    "صفعان": { hotels: [] },
                    "منبر": { hotels: [] },
                    "الحصن": { hotels: [] },
                    "بني ضبيان": { hotels: [] }
                }
            },
            "عدن": {
                regions: {
                    "خور مكسر": { 
                        hotels: [
                            {
                                id: 2,
                                name: "فندق القصر الملكي ⭐⭐⭐⭐",
                                image: "https://source.unsplash.com/random/800x600?hotel",
                                rating: 4.2,
                                description: "فندق 4 نجوم في قلب عدن، يوفر إطلاعات رائعة على البحر وخدمات فاخرة",
                                rooms: [
                                    {
                                        id: 201,
                                        type: "غرفة سريرين",
                                        price: 65,
                                        image: "https://source.unsplash.com/random/800x600?hotel-room",
                                        amenities: ["واي فاي مجاني", "تلفزيون", "ميني بار", "تكييف"],
                                        capacity: 2,
                                        beds: "سريرين فرديين",
                                        size: "30 متر مربع",
                                        contents: {
                                            furniture: ["سريرين فرديين", "طاولة عمل", "خزانة ملابس"],
                                            bathroom: ["دش", "مجفف شعر", "أدوات استحمام"],
                                            electronics: ["تلفزيون 32 بوصة", "هاتف"],
                                            services: ["خدمة الغرف", "تنظيف يومي"],
                                            other: ["تكييف هواء", "سفرة صغيرة"]
                                        }
                                    },
                                    {
                                        id: 202,
                                        type: "جناح عائلي",
                                        price: 95,
                                        image: "https://source.unsplash.com/random/800x600?family-room",
                                        amenities: ["غرفة معيشة", "مطبخ صغير", "حمام سبا"],
                                        capacity: 4,
                                        beds: "سرير كينج + سريرين فرديين",
                                        size: "55 متر مربع",
                                        contents: {
                                            furniture: ["سرير كينج", "سريرين فرديين", "أريكة", "طاولة طعام"],
                                            bathroom: ["جاكوزي", "دش", "مجفف شعر"],
                                            electronics: ["تلفزيون 42 بوصة", "نظام صوتي"],
                                            services: ["خدمة الغرف 24 ساعة", "تنظيف يومي"],
                                            other: ["تكييف هواء مركزي", "مطبخ صغير"]
                                        }
                                    }
                                ]
                            }
                        ] 
                    },
                    "الشيخ عثمان": { hotels: [] },
                    "كريتر": { hotels: [] },
                    "المعلا": { hotels: [] },
                    "المنصورة": { hotels: [] },
                    "دار سعد ": { hotels: [] },
                    "التواهي": { hotels: [] },
                    "البريقة": { hotels: [] }
                }
            },
            "تعز": {
                regions: {
                    "المدينة": { 
                        hotels: [
                            {
                                id: 3,
                                name: "فندق تعز الدولي ⭐⭐⭐",
                                image: "https://source.unsplash.com/random/800x600?hotel-building",
                                rating: 3.8,
                                description: "فندق 3 نجوم في مركز مدينة تعز، موقع مميز وقريب من المعالم السياحية",
                                rooms: [
                                    {
                                        id: 301,
                                        type: "غرفة فردية",
                                        price: 40,
                                        image: "https://source.unsplash.com/random/800x600?single-room",
                                        amenities: ["واي فاي مجاني", "تلفزيون", "تكييف"],
                                        capacity: 1,
                                        beds: "سرير فردي",
                                        size: "25 متر مربع",
                                        contents: {
                                            furniture: ["سرير فردي", "طاولة عمل", "خزانة ملابس"],
                                            bathroom: ["دش", "أدوات استحمام"],
                                            electronics: ["تلفزيون 32 بوصة"],
                                            services: ["تنظيف يومي"],
                                            other: ["تكييف هواء"]
                                        }
                                    },
                                    {
                                        id: 302,
                                        type: "غرفة مزدوجة",
                                        price: 60,
                                        image: "https://source.unsplash.com/random/800x600?double-room",
                                        amenities: ["واي فاي مجاني", "تلفزيون", "تكييف", "ميني بار"],
                                        capacity: 2,
                                        beds: "سرير كينج",
                                        size: "35 متر مربع",
                                        contents: {
                                            furniture: ["سرير كينج", "طاولة عمل", "خزانة ملابس"],
                                            bathroom: ["دش", "أدوات استحمام"],
                                            electronics: ["تلفزيون 32 بوصة"],
                                            services: ["تنظيف يومي"],
                                            other: ["تكييف هواء", "ميني بار"]
                                        }
                                    }
                                ]
                            }
                        ] 
                    },
                    "القاهرة": { hotels: [] },
                    "المظفر": { hotels: [] },
                    "صالة": { hotels: [] },
                    "مشرة": { hotels: [] },
                    "الروضة": { hotels: [] }
                }
            },
            "الحديدة": {
                regions: {
                    "المراوعة": { hotels: [] },
                    "باجل": { hotels: [] },
                    "الزيدية": { hotels: [] },
                    "التحيتا": { hotels: [] },
                    "الجراحي": { hotels: [] }
                }
            },
            "حضرموت": {
                regions: {
                    "المكلا": { 
                        hotels: [
                            {
                                id: 4,
                                name: "فندق المكلا السياحي ⭐⭐⭐⭐",
                                image: "https://source.unsplash.com/random/800x600?beach-hotel",
                                rating: 4.3,
                                description: "فندق على شاطئ البحر في المكلا، يوفر إطلالات خلابة على المحيط الهندي",
                                rooms: [
                                    {
                                        id: 401,
                                        type: "غرفة بحرية",
                                        price: 80,
                                        image: "https://source.unsplash.com/random/800x600?sea-view",
                                        amenities: ["واي فاي مجاني", "تلفزيون", "تكييف", "شرفة"],
                                        capacity: 2,
                                        beds: "سرير كينج",
                                        size: "40 متر مربع",
                                        contents: {
                                            furniture: ["سرير كينج", "أريكة", "طاولة عمل"],
                                            bathroom: ["دش", "أدوات استحمام فاخرة"],
                                            electronics: ["تلفزيون 42 بوصة"],
                                            services: ["خدمة الغرف", "تنظيف يومي"],
                                            other: ["تكييف هواء", "شرفة بحرية"]
                                        }
                                    }
                                ]
                            }
                        ] 
                    },
                    "الشحر": { hotels: [] },
                    "سيئون": { hotels: [] },
                    "تريم": { hotels: [] },
                    "دوعن": { hotels: [] },
                    "القطن": { hotels: [] }
                }
            },
            "إب": {
                regions: {
                    "المركز": { hotels: [] },
                    "الظهار": { hotels: [] },
                    "السدة": { hotels: [] },
                    "العدين": { hotels: [] },
                    "فرع العدين": { hotels: [] }
                }
            },
            "ذمار": {
                regions: {
                    "المركز": { hotels: [] },
                    "عتام": { hotels: [] },
                    "جهران": { hotels: [] },
                    "مغرب عنس": { hotels: [] },
                    "ضوران": { hotels: [] }
                }
            },
            "شبوة": {
                regions: {
                    "عتق": { hotels: [] },
                    "بيحان": { hotels: [] },
                    "مرخة": { hotels: [] },
                    "رصد": { hotels: [] },
                    "عتق": { hotels: [] }
                }
            },
            "المهرة": {
                regions: {
                    "الغيظة": { hotels: [] },
                    "قشن": { hotels: [] },
                    "حوف": { hotels: [] },
                    "منعر": { hotels: [] }
                }
            },
            "الجوف": {
                regions: {
                    "الحزم": { hotels: [] },
                    "الخب والشعف": { hotels: [] },
                    "برط العنان": { hotels: [] },
                    "رطبة": { hotels: [] }
                }
            },
            "المحويت": {
                regions: {
                    "المحويت": { hotels: [] },
                    "الطويلة": { hotels: [] },
                    "ملحان": { hotels: [] },
                    "حفاش": { hotels: [] }
                }
            },
            "البيضاء": {
                regions: {
                    "المركز": { hotels: [] },
                    "الرياشية": { hotels: [] },
                    "الصومعة": { hotels: [] },
                    "ناطع": { hotels: [] }
                }
            },
            "صعدة": {
                regions: {
                    "المركز": { hotels: [] },
                    "قطابر": { hotels: [] },
                    "حيدان": { hotels: [] },
                    "سحار": { hotels: [] }
                }
            },
            "حجة": {
                regions: {
                    "حجة": { hotels: [] },
                    "كحلان": { hotels: [] },
                    "المغرب": { hotels: [] },
                    "شبام": { hotels: [] }
                }
            },
            "ريمة": {
                regions: {
                    "الجبين": { hotels: [] },
                    "بلاد الطعام": { hotels: [] },
                    "مزهر": { hotels: [] },
                    "السلفية": { hotels: [] }
                }
            },
            "أبين": {
                regions: {
                    "زنجبار": { hotels: [] },
                    "لودر": { hotels: [] },
                    "خنفر": { hotels: [] },
                    "رصد": { hotels: [] }
                }
            },
            "لحج": {
                regions: {
                    "الحوطة": { hotels: [] },
                    "تبن": { hotels: [] },
                    "ردفان": { hotels: [] },
                    "المضاربة": { hotels: [] }
                }
            },
            "مأرب": {
                regions: {
                    "مأرب": { hotels: [] },
                    "الجوبة": { hotels: [] },
                    "بدبدة": { hotels: [] },
                    "رحبة": { hotels: [] }
                }
            },
            "الضالع": {
                regions: {
                    "الضالع": { hotels: [] },
                    "جحاف": { hotels: [] },
                    "الحشاء": { hotels: [] },
                    "قبلة": { hotels: [] }
                }
            },
            "عمران": {
                regions: {
                    "عمران": { hotels: [] },
                    "خارف": { hotels: [] },
                    "ثلا": { hotels: [] },
                    "السود": { hotels: [] }
                }
            },
            "سقطرى": {
                regions: {
                    "حديبو": { 
                        hotels: [
                            {
                                id: 5,
                                name: "منتجع سقطرى ⭐⭐⭐⭐",
                                image: "https://source.unsplash.com/random/800x600?island-resort",
                                rating: 4.7,
                                description: "منتجع فاخر في جزيرة سقطرى، تجربة فريدة مع الطبيعة الساحرة",
                                rooms: [
                                    {
                                        id: 501,
                                        type: "فيلا شاطئية",
                                        price: 120,
                                        image: "https://source.unsplash.com/random/800x600?villa",
                                        amenities: ["واي فاي", "تلفزيون", "مسبح خاص", "شاطئ خاص"],
                                        capacity: 4,
                                        beds: "سريرين كينج",
                                        size: "80 متر مربع",
                                        contents: {
                                            furniture: ["سريرين كينج", "أريكتان", "طاولة طعام", "خزانة ملابس"],
                                            bathroom: ["جاكوزي", "دش خارجي", "أدوات استحمام فاخرة"],
                                            electronics: ["تلفزيون 55 بوصة", "نظام صوتي"],
                                            services: ["خدمة بتلر", "تنظيف يومي"],
                                            other: ["مسبح خاص", "شرفة شاطئية"]
                                        }
                                    }
                                ]
                            }
                        ] 
                    },
                    "قلنسية": { hotels: [] },
                    "عبد الكوري": { hotels: [] },
                    "درسه": { hotels: [] }
                }
            }
        };

        // بيانات الخدمات
        let servicesData = {
            "تأجير السيارات": [
                {
                    id: 1001,
                    name: "سيارة سيدان اقتصادية",
                    image: "https://source.unsplash.com/random/800x600?sedan-car",
                    price: 50,
                    description: "سيارة مريحة مناسبة للعائلات الصغيرة، استهلاك وقود اقتصادي",
                    features: ["تكييف هواء", "ناقل حركة أوتوماتيك", "4 أبواب", "تأمين شامل"],
                    capacity: 4,
                    whatsapp: "967777777771",
                    governorate: "صنعاء"
                },
                {
                    id: 1002,
                    name: "سيارة دفع رباعي",
                    image: "https://source.unsplash.com/random/800x600?suv-car",
                    price: 80,
                    description: "سيارة دفع رباعي مناسبة للطرق الوعرة والسفر الطويل",
                    features: ["تكييف هواء", "4x4", "7 مقاعد", "تأمين شامل"],
                    capacity: 7,
                    whatsapp: "967777777772",
                    governorate: "عدن"
                },
                {
                    id: 1003,
                    name: "سيارة فاخرة",
                    image: "https://source.unsplash.com/random/800x600?luxury-car",
                    price: 120,
                    description: "سيارة فاخرة بمواصفات عالية لرحلة مميزة",
                    features: ["تكييف هواء", "ناقل حركة أوتوماتيك", "جلد طبيعي", "تأمين شامل"],
                    capacity: 4,
                    whatsapp: "967777777773",
                    governorate: "تعز"
                }
            ],
            "جولات سياحية": [
                {
                    id: 2001,
                    name: "جولة تاريخية في صنعاء القديمة",
                    image: "https://source.unsplash.com/random/800x600?old-sanaa",
                    price: 30,
                    description: "جولة مميزة تشمل أهم المعالم التاريخية في صنعاء القديمة",
                    features: ["مرشد سياحي", "مواصلات", "وجبة غداء", "تذاكر دخول"],
                    duration: "5 ساعات",
                    whatsapp: "967777777774",
                    governorate: "صنعاء"
                },
                {
                    id: 2002,
                    name: "جولة في جزيرة سقطرى",
                    image: "https://source.unsplash.com/random/800x600?socotra-island",
                    price: 120,
                    description: "جولة شاملة لأهم المعالم الطبيعية في جزيرة سقطرى",
                    features: ["إقامة 3 ليالي", "مرشد سياحي", "وجبات كاملة", "مواصلات"],
                    duration: "4 أيام",
                    whatsapp: "967777777775",
                    governorate: "سقطرى"
                },
                {
                    id: 2003,
                    name: "جولة شاطئية في عدن",
                    image: "https://source.unsplash.com/random/800x600?aden-beach",
                    price: 50,
                    description: "جولة ممتعة في شواطئ عدن الخلابة",
                    features: ["مرشد سياحي", "مواصلات", "وجبة غداء", "تذاكر دخول"],
                    duration: "6 ساعات",
                    whatsapp: "967782307215",
                    governorate: "عدن"
                }
            ],
            "خدمات المطار": [
                {
                    id: 3001,
                    name: "استقبال من المطار",
                    image: "https://source.unsplash.com/random/800x600?airport-pickup",
                    price: 25,
                    description: "خدمة استقبال من المطار مع سائق متحدث بالعربية",
                    features: ["سيارة مكيفة", "مساعدة بالأمتعة", "مياه مجانية"],
                    whatsapp: "967777777777",
                    governorate: "صنعاء"
                },
                {
                    id: 3002,
                    name: "توصيل إلى المطار",
                    image: "https://source.unsplash.com/random/800x600?airport-drop",
                    price: 25,
                    description: "خدمة توصيل إلى المطار مع تتبع الرحلة",
                    features: ["سيارة مكيفة", "تتبع الرحلة", "تذكير بالمواعيد"],
                    whatsapp: "967782307215",
                    governorate: "عدن"
                },
                {
                    id: 3003,
                    name: "خدمة المطار VIP",
                    image: "https://source.unsplash.com/random/800x600?vip-service",
                    price: 50,
                    description: "خدمة استقبال وتوديع VIP مع مساعدة كاملة في إجراءات المطار",
                    features: ["سيارة فاخرة", "مساعد شخصي", "تسهيل إجراءات السفر"],
                    whatsapp: "967782307215",
                    governorate: "حضرموت"
                }
            ]
        };

        // بيانات الحجوزات
        let bookings = [
            {
                id: 1001,
                hotelId: 1,
                roomId: 101,
                customerName: "أحمد محمد",
                phone: "712345678",
                email: "ahmed@example.com",
                checkinDate: "2023-12-15",
                nights: 3,
                guests: 2,
                totalPrice: 135,
                status: "confirmed",
                bookingDate: "2023-11-20"
            },
            {
                id: 1002,
                hotelId: 2,
                roomId: 201,
                customerName: "فاطمة علي",
                phone: "723456789",
                email: "fatima@example.com",
                checkinDate: "2023-12-20",
                nights: 2,
                guests: 1,
                totalPrice: 130,
                status: "pending",
                bookingDate: "2023-11-22"
            }
        ];

        // حجوزات الخدمات
        let serviceBookings = [];

        // متغيرات النظام
        let currentStep = 'step1';
        let selected = {
            governorate: '',
            region: '',
            hotel: null,
            room: null,
            booking: null,
            paymentMethod: null
        };
        
        let currentCategory = "all";
        let currentGovernorate = "all";
        let currentServiceType = "all";
        let isAdmin = false;

        // تحميل البيانات المحفوظة
        function loadSavedData() {
            const savedHotels = localStorage.getItem('yemenHotelsData');
            const savedBookings = localStorage.getItem('yemenHotelsBookings');
            const savedServices = localStorage.getItem('yemenHotelsServices');
            const savedServiceBookings = localStorage.getItem('yemenHotelsServiceBookings');
            const savedSettings = localStorage.getItem('yemenHotelsSettings');
            
            if (savedHotels) {
                yemenData = JSON.parse(savedHotels);
            }
            
            if (savedBookings) {
                bookings = JSON.parse(savedBookings);
            }
            
            if (savedServices) {
                servicesData = JSON.parse(savedServices);
            }
            
            if (savedServiceBookings) {
                serviceBookings = JSON.parse(savedServiceBookings);
            }
            
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                document.getElementById('adminSystemName').value = settings.systemName;
                document.getElementById('adminContactEmail').value = settings.contactEmail;
                document.getElementById('adminContactPhone').value = settings.contactPhone;
            }
        }

        // حفظ البيانات
        function saveDataToStorage() {
            localStorage.setItem('yemenHotelsData', JSON.stringify(yemenData));
            localStorage.setItem('yemenHotelsBookings', JSON.stringify(bookings));
            localStorage.setItem('yemenHotelsServices', JSON.stringify(servicesData));
            localStorage.setItem('yemenHotelsServiceBookings', JSON.stringify(serviceBookings));
            
            const settings = {
                systemName: document.getElementById('adminSystemName').value,
                contactEmail: document.getElementById('adminContactEmail').value,
                contactPhone: document.getElementById('adminContactPhone').value
            };
            localStorage.setItem('yemenHotelsSettings', JSON.stringify(settings));
        }

        // تصدير البيانات
        function exportData() {
            const data = {
                hotels: yemenData,
                bookings: bookings,
                services: servicesData,
                serviceBookings: serviceBookings,
                settings: {
                    systemName: document.getElementById('adminSystemName').value,
                    contactEmail: document.getElementById('adminContactEmail').value,
                    contactPhone: document.getElementById('adminContactPhone').value
                }
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'yemen-hotels-backup.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage('تم تصدير بيانات النظام بنجاح');
        }

        // استيراد البيانات
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.hotels) {
                        yemenData = data.hotels;
                        localStorage.setItem('yemenHotelsData', JSON.stringify(yemenData));
                    }
                    
                    if (data.bookings) {
                        bookings = data.bookings;
                        localStorage.setItem('yemenHotelsBookings', JSON.stringify(bookings));
                    }
                    
                    if (data.services) {
                        servicesData = data.services;
                        localStorage.setItem('yemenHotelsServices', JSON.stringify(servicesData));
                    }
                    
                    if (data.serviceBookings) {
                        serviceBookings = data.serviceBookings;
                        localStorage.setItem('yemenHotelsServiceBookings', JSON.stringify(serviceBookings));
                    }
                    
                    if (data.settings) {
                        document.getElementById('adminSystemName').value = data.settings.systemName;
                        document.getElementById('adminContactEmail').value = data.settings.contactEmail;
                        document.getElementById('adminContactPhone').value = data.settings.contactPhone;
                        localStorage.setItem('yemenHotelsSettings', JSON.stringify(data.settings));
                    }
                    
                    showSuccessMessage('تم استيراد البيانات بنجاح');
                    loadAdminHotels();
                    loadBookings();
                    loadHotelsForAdmin();
                    loadAdminServices();
                } catch (error) {
                    alert('خطأ في تحميل الملف: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // التحقق من صلاحيات المدير
        function checkAdminAuth() {
            const savedPassword = localStorage.getItem('adminPassword');
            if (savedPassword) {
                const password = prompt('أدخل كلمة مرور المدير:');
                if (password === savedPassword) {
                    isAdmin = true;
                    return true;
                }
                alert('كلمة المرور غير صحيحة');
                return false;
            } else {
                // أول دخول، إنشاء كلمة مرور
                const password = prompt('قم بإنشاء كلمة مرور للمدير:');
                if (password) {
                    localStorage.setItem('adminPassword', password);
                    isAdmin = true;
                    return true;
                }
                return false;
            }
        }

        // تغيير كلمة مرور المدير
        function changeAdminPassword() {
            const oldPassword = prompt('أدخل كلمة المرور الحالية:');
            const savedPassword = localStorage.getItem('adminPassword');
            
            if (oldPassword !== savedPassword) {
                alert('كلمة المرور الحالية غير صحيحة');
                return;
            }
            
            const newPassword = prompt('أدخل كلمة المرور الجديدة:');
            if (newPassword) {
                localStorage.setItem('adminPassword', newPassword);
                showSuccessMessage('تم تغيير كلمة المرور بنجاح');
            }
        }

        // دوال إدارة الخدمات
        function loadAdminServices() {
            const container = document.getElementById('servicesList');
            container.innerHTML = '';
            
            let servicesCount = 0;
            
            for (const category in servicesData) {
                servicesData[category].forEach(service => {
                    servicesCount++;
                    const serviceItem = document.createElement('div');
                    serviceItem.className = 'admin-list-item';
                    serviceItem.innerHTML = `
                        <div>
                            <strong>${service.name}</strong> - ${service.governorate}<br>
                            <small>${category} | $${service.price}</small>
                        </div>
                        <div class="admin-actions">
                            <button class="admin-btn-small edit-btn" onclick="editService('${category}', ${service.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="admin-btn-small delete-btn" onclick="deleteService('${category}', ${service.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(serviceItem);
                });
            }
            
            if (servicesCount === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد خدمات مسجلة</p>';
            }
        }

        function saveService() {
            const serviceId = document.getElementById('editServiceId').value;
            const category = document.getElementById('serviceCategory').value;
            const name = document.getElementById('serviceName').value;
            const governorate = document.getElementById('serviceGovernorate').value;
            const price = document.getElementById('servicePrice').value;
            const image = document.getElementById('serviceImage').value;
            const description = document.getElementById('serviceDescription').value;
            const features = document.getElementById('serviceFeatures').value.split(',').map(f => f.trim());
            const capacity = document.getElementById('serviceCapacity').value;
            const whatsapp = document.getElementById('serviceWhatsapp').value;
            
            if (!category || !name || !governorate || !price || !whatsapp) {
                alert('الرجاء إدخال جميع الحقول المطلوبة');
                return;
            }
            
            const newService = {
                id: serviceId || Date.now(),
                name: name,
                image: image || "https://source.unsplash.com/random/800x600?" + category,
                price: parseInt(price),
                description: description || "لا يوجد وصف متاح",
                features: features,
                capacity: capacity ? parseInt(capacity) : null,
                whatsapp: whatsapp,
                governorate: governorate
            };

            if (serviceId) {
                // تعديل الخدمة الموجودة
                let found = false;
                for (const cat in servicesData) {
                    servicesData[cat] = servicesData[cat].filter(s => s.id != serviceId);
                }
                servicesData[category].push(newService);
            } else {
                // إضافة خدمة جديدة
                if (!servicesData[category]) {
                    servicesData[category] = [];
                }
                servicesData[category].push(newService);
            }

            saveDataToStorage();
            loadAdminServices();
            resetServiceForm();
            showSuccessMessage(serviceId ? "تم تحديث الخدمة بنجاح" : "تم إضافة الخدمة بنجاح");
        }

        function editService(category, serviceId) {
            const service = servicesData[category].find(s => s.id == serviceId);
            if (!service) return;

            document.getElementById('editServiceId').value = service.id;
            document.getElementById('serviceCategory').value = category;
            document.getElementById('serviceName').value = service.name;
            document.getElementById('serviceGovernorate').value = service.governorate;
            document.getElementById('servicePrice').value = service.price;
            document.getElementById('serviceImage').value = service.image;
            document.getElementById('serviceDescription').value = service.description;
            document.getElementById('serviceFeatures').value = service.features.join(', ');
            document.getElementById('serviceCapacity').value = service.capacity || '';
            document.getElementById('serviceWhatsapp').value = service.whatsapp;

            // التمرير إلى أعلى النموذج
            document.getElementById('servicesTab').scrollIntoView({ behavior: 'smooth' });
        }

        function deleteService(category, serviceId) {
            if (!confirm('هل أنت متأكد من حذف هذه الخدمة؟ لا يمكن التراجع عن هذا الإجراء.')) {
                return;
            }

            servicesData[category] = servicesData[category].filter(s => s.id != serviceId);
            saveDataToStorage();
            loadAdminServices();
            showSuccessMessage('تم حذف الخدمة بنجاح');
        }

        function resetServiceForm() {
            document.getElementById('editServiceId').value = '';
            document.getElementById('serviceCategory').value = '';
            document.getElementById('serviceName').value = '';
            document.getElementById('serviceGovernorate').value = '';
            document.getElementById('servicePrice').value = '';
            document.getElementById('serviceImage').value = '';
            document.getElementById('serviceDescription').value = '';
            document.getElementById('serviceFeatures').value = '';
            document.getElementById('serviceCapacity').value = '';
            document.getElementById('serviceWhatsapp').value = '';
        }

        // دوال إدارة الفنادق
        function loadAdminHotels() {
            const container = document.getElementById('hotelsList');
            container.innerHTML = '';
            
            let hotelsCount = 0;
            
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    yemenData[governorate].regions[region].hotels.forEach(hotel => {
                        hotelsCount++;
                        const hotelItem = document.createElement('div');
                        hotelItem.className = 'admin-list-item';
                        hotelItem.innerHTML = `
                            <div>
                                <strong>${hotel.name}</strong> - ${governorate}, ${region}<br>
                                <small>${'⭐'.repeat(Math.round(hotel.rating))} | ${hotel.rooms.length} غرف</small>
                            </div>
                            <div class="admin-actions">
                                <button class="admin-btn-small edit-btn" onclick="editHotel(${hotel.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="admin-btn-small delete-btn" onclick="deleteHotel(${hotel.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        `;
                        container.appendChild(hotelItem);
                    });
                }
            }
            
            if (hotelsCount === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد فنادق مسجلة</p>';
            }
        }

        function saveHotel() {
            const hotelId = document.getElementById('editHotelId').value;
            const name = document.getElementById('hotelName').value;
            const governorate = document.getElementById('hotelGovernorate').value;
            const region = document.getElementById('hotelRegion').value;
            const rating = document.getElementById('hotelRating').value;
            const image = document.getElementById('hotelImage').value;
            const description = document.getElementById('hotelDescription').value;
            
            if (!name || !governorate || !region) {
                alert('الرجاء إدخال جميع الحقول المطلوبة');
                return;
            }
            
            const newHotel = {
                id: hotelId || Date.now(),
                name: name,
                image: image || "https://source.unsplash.com/random/800x600?hotel",
                rating: parseFloat(rating),
                description: description || "لا يوجد وصف متاح",
                rooms: []
            };

            if (hotelId) {
                // تعديل الفندق الموجود
                let found = false;
                for (const gov in yemenData) {
                    for (const reg in yemenData[gov].regions) {
                        const index = yemenData[gov].regions[reg].hotels.findIndex(h => h.id == hotelId);
                        if (index !== -1) {
                            newHotel.rooms = yemenData[gov].regions[reg].hotels[index].rooms;
                            yemenData[gov].regions[reg].hotels.splice(index, 1);
                            found = true;
                            break;
                        }
                    }
                    if (found) break;
                }
                yemenData[governorate].regions[region].hotels.push(newHotel);
            } else {
                // إضافة فندق جديد
                yemenData[governorate].regions[region].hotels.push(newHotel);
            }

            saveDataToStorage();
            loadAdminHotels();
            resetHotelForm();
            showSuccessMessage(hotelId ? "تم تحديث الفندق بنجاح" : "تم إضافة الفندق بنجاح");
        }

        function editHotel(hotelId) {
            let hotel = null;
            let governorate = '';
            let region = '';
            
            for (const gov in yemenData) {
                for (const reg in yemenData[gov].regions) {
                    const foundHotel = yemenData[gov].regions[reg].hotels.find(h => h.id == hotelId);
                    if (foundHotel) {
                        hotel = foundHotel;
                        governorate = gov;
                        region = reg;
                        break;
                    }
                }
                if (hotel) break;
            }
            
            if (!hotel) return;

            document.getElementById('editHotelId').value = hotel.id;
            document.getElementById('hotelName').value = hotel.name;
            document.getElementById('hotelGovernorate').value = governorate;
            populateRegions(governorate, 'hotelRegion');
            setTimeout(() => {
                document.getElementById('hotelRegion').value = region;
            }, 100);
            document.getElementById('hotelRating').value = hotel.rating;
            document.getElementById('hotelImage').value = hotel.image;
            document.getElementById('hotelDescription').value = hotel.description;

            // التمرير إلى أعلى النموذج
            document.getElementById('hotelsTab').scrollIntoView({ behavior: 'smooth' });
        }

        function deleteHotel(hotelId) {
            if (!confirm('هل أنت متأكد من حذف هذا الفندق؟ سيتم حذف جميع الغرف المرتبطة به.')) {
                return;
            }

            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    yemenData[governorate].regions[region].hotels = 
                        yemenData[governorate].regions[region].hotels.filter(h => h.id != hotelId);
                }
            }
            
            saveDataToStorage();
            loadAdminHotels();
            showSuccessMessage('تم حذف الفندق بنجاح');
        }

        function resetHotelForm() {
            document.getElementById('editHotelId').value = '';
            document.getElementById('hotelName').value = '';
            document.getElementById('hotelGovernorate').value = '';
            document.getElementById('hotelRegion').value = '';
            document.getElementById('hotelRating').value = '5';
            document.getElementById('hotelImage').value = '';
            document.getElementById('hotelDescription').value = '';
        }

        // دوال إدارة الغرف
        function loadHotelRooms(hotelId) {
            const container = document.getElementById('roomsList');
            container.innerHTML = '';
            
            if (!hotelId) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">الرجاء اختيار فندق أولاً</p>';
                return;
            }
            
            let hotel = null;
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const foundHotel = yemenData[governorate].regions[region].hotels.find(h => h.id == hotelId);
                    if (foundHotel) {
                        hotel = foundHotel;
                        break;
                    }
                }
                if (hotel) break;
            }
            
            if (!hotel) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">الفندق المحدد غير موجود</p>';
                return;
            }
            
            if (hotel.rooms.length === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد غرف مسجلة لهذا الفندق</p>';
                return;
            }
            
            hotel.rooms.forEach(room => {
                const roomItem = document.createElement('div');
                roomItem.className = 'admin-list-item';
                roomItem.innerHTML = `
                    <div>
                        <strong>${room.type}</strong> - $${room.price}<br>
                        <small>سعة: ${room.capacity} أشخاص | ${room.beds || 'غير محدد'}</small>
                    </div>
                    <div class="admin-actions">
                        <button class="admin-btn-small edit-btn" onclick="editRoom(${hotel.id}, ${room.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="admin-btn-small delete-btn" onclick="deleteRoom(${hotel.id}, ${room.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                container.appendChild(roomItem);
            });
        }

        function saveRoom() {
            const roomId = document.getElementById('editRoomId').value;
            const hotelId = document.getElementById('roomHotel').value;
            const type = document.getElementById('roomType').value;
            const price = document.getElementById('roomPrice').value;
            const capacity = document.getElementById('roomCapacity').value;
            const beds = document.getElementById('roomBeds').value;
            const image = document.getElementById('roomImage').value;
            const amenities = document.getElementById('roomAmenities').value.split(',').map(a => a.trim());
            
            if (!hotelId || !type || !price || !capacity) {
                alert('الرجاء إدخال جميع الحقول المطلوبة');
                return;
            }
            
            const newRoom = {
                id: roomId || Date.now(),
                type: type,
                price: parseInt(price),
                image: image || "https://source.unsplash.com/random/800x600?hotel-room",
                amenities: amenities,
                capacity: parseInt(capacity),
                beds: beds || "غير محدد",
                size: "غير محدد",
                contents: {
                    furniture: ["سرير", "طاولة عمل", "خزانة ملابس"],
                    bathroom: ["دش", "أدوات استحمام"],
                    electronics: ["تلفزيون"],
                    services: ["تنظيف يومي"],
                    other: ["تكييف هواء"]
                }
            };

            let hotelFound = false;
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const hotelIndex = yemenData[governorate].regions[region].hotels.findIndex(h => h.id == hotelId);
                    if (hotelIndex !== -1) {
                        hotelFound = true;
                        
                        if (roomId) {
                            // تعديل الغرفة الموجودة
                            const roomIndex = yemenData[governorate].regions[region].hotels[hotelIndex].rooms.findIndex(r => r.id == roomId);
                            if (roomIndex !== -1) {
                                yemenData[governorate].regions[region].hotels[hotelIndex].rooms[roomIndex] = newRoom;
                            }
                        } else {
                            // إضافة غرفة جديدة
                            yemenData[governorate].regions[region].hotels[hotelIndex].rooms.push(newRoom);
                        }
                        break;
                    }
                }
                if (hotelFound) break;
            }
            
            if (!hotelFound) {
                alert('الفندق المحدد غير موجود');
                return;
            }

            saveDataToStorage();
            loadHotelRooms(hotelId);
            resetRoomForm();
            showSuccessMessage(roomId ? "تم تحديث الغرفة بنجاح" : "تم إضافة الغرفة بنجاح");
        }

        function editRoom(hotelId, roomId) {
            let room = null;
            
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const hotel = yemenData[governorate].regions[region].hotels.find(h => h.id == hotelId);
                    if (hotel) {
                        const foundRoom = hotel.rooms.find(r => r.id == roomId);
                        if (foundRoom) {
                            room = foundRoom;
                            break;
                        }
                    }
                }
                if (room) break;
            }
            
            if (!room) return;

            document.getElementById('editRoomId').value = room.id;
            document.getElementById('roomHotel').value = hotelId;
            document.getElementById('roomType').value = room.type;
            document.getElementById('roomPrice').value = room.price;
            document.getElementById('roomCapacity').value = room.capacity;
            document.getElementById('roomBeds').value = room.beds;
            document.getElementById('roomImage').value = room.image;
            document.getElementById('roomAmenities').value = room.amenities.join(', ');

            // التمرير إلى أعلى النموذج
            document.getElementById('roomsTab').scrollIntoView({ behavior: 'smooth' });
        }

        function deleteRoom(hotelId, roomId) {
            if (!confirm('هل أنت متأكد من حذف هذه الغرفة؟ لا يمكن التراجع عن هذا الإجراء.')) {
                return;
            }

            let roomFound = false;
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const hotel = yemenData[governorate].regions[region].hotels.find(h => h.id == hotelId);
                    if (hotel) {
                        hotel.rooms = hotel.rooms.filter(r => r.id != roomId);
                        roomFound = true;
                        break;
                    }
                }
                if (roomFound) break;
            }
            
            if (!roomFound) {
                alert('الغرفة المحددة غير موجودة');
                return;
            }

            saveDataToStorage();
            loadHotelRooms(hotelId);
            showSuccessMessage('تم حذف الغرفة بنجاح');
        }

        function resetRoomForm() {
            document.getElementById('editRoomId').value = '';
            document.getElementById('roomType').value = '';
            document.getElementById('roomPrice').value = '';
            document.getElementById('roomCapacity').value = '';
            document.getElementById('roomBeds').value = '';
            document.getElementById('roomImage').value = '';
            document.getElementById('roomAmenities').value = '';
        }

        // دوال إدارة الحجوزات
        function loadBookings() {
            const container = document.getElementById('bookingsList');
            container.innerHTML = '';
            
            if (bookings.length === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد حجوزات مسجلة</p>';
                return;
            }
            
            bookings.forEach(booking => {
                let hotel = null;
                let room = null;
                
                for (const governorate in yemenData) {
                    for (const region in yemenData[governorate].regions) {
                        const foundHotel = yemenData[governorate].regions[region].hotels.find(h => h.id == booking.hotelId);
                        if (foundHotel) {
                            hotel = foundHotel;
                            room = foundHotel.rooms.find(r => r.id == booking.roomId);
                            break;
                        }
                    }
                    if (hotel) break;
                }
                
                if (!hotel || !room) return;
                
                const bookingItem = document.createElement('div');
                bookingItem.className = 'admin-list-item';
                bookingItem.innerHTML = `
                    <div>
                        <strong>${booking.customerName}</strong> - ${hotel.name}<br>
                        <small>${room.type} | ${booking.checkinDate} (${booking.nights} ليالي) | $${booking.totalPrice}</small>
                        <div style="margin-top:5px;">
                            <span class="badge ${booking.status === 'confirmed' ? 'success' : 'warning'}">
                                ${booking.status === 'confirmed' ? 'مؤكد' : 'قيد الانتظار'}
                            </span>
                        </div>
                    </div>
                    <div class="admin-actions">
                        <button class="admin-btn-small ${booking.status === 'confirmed' ? 'back-btn' : 'next-btn'}" 
                                onclick="updateBookingStatus(${booking.id}, '${booking.status === 'confirmed' ? 'pending' : 'confirmed'}')">
                            <i class="fas fa-${booking.status === 'confirmed' ? 'undo' : 'check'}"></i>
                        </button>
                        <button class="admin-btn-small delete-btn" onclick="deleteBooking(${booking.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                container.appendChild(bookingItem);
            });
// في دالة loadBookings() عند عرض الحجوزات
const bookingItem = document.createElement('div');
bookingItem.className = 'admin-list-item';
bookingItem.innerHTML = `
    <div>
        <strong>${booking.customerName}</strong> - ${hotel.name}<br>
        <small>${room.type} | ${booking.checkinDate} | ${booking.nights} ليالي</small>
        <div style="margin-top:5px;">
            <span>التنبيهات: </span>
            <button class="small-btn ${booking.reminders.threeDaysBefore ? 'active' : ''}" 
                    onclick="toggleReminder(${booking.id}, 'threeDaysBefore')">
                3 أيام
            </button>
            <button class="small-btn ${booking.reminders.oneDayBefore ? 'active' : ''}" 
                    onclick="toggleReminder(${booking.id}, 'oneDayBefore')">
                1 يوم
            </button>
        </div>
    </div>
`;

// دالة تبديل حالة التنبيه
function toggleReminder(bookingId, reminderType) {
    const booking = bookings.find(b => b.id == bookingId);
    if (booking) {
        booking.reminders[reminderType] = !booking.reminders[reminderType];
        saveDataToStorage();
        loadBookings();
    }
}


        }

        function updateBookingStatus(bookingId, newStatus) {
            const bookingIndex = bookings.findIndex(b => b.id == bookingId);
            if (bookingIndex !== -1) {
                bookings[bookingIndex].status = newStatus;
                saveDataToStorage();
                loadBookings();
                showSuccessMessage('تم تحديث حالة الحجز بنجاح');
            }
        }

        function deleteBooking(bookingId) {
            if (!confirm('هل أنت متأكد من حذف هذا الحجز؟ لا يمكن التراجع عن هذا الإجراء.')) {
                return;
            }

            bookings = bookings.filter(b => b.id != bookingId);
            saveDataToStorage();
            loadBookings();
            showSuccessMessage('تم حذف الحجز بنجاح');
        }

        function exportBookings() {
            const dataStr = JSON.stringify(bookings, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'yemen-hotels-bookings.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccessMessage('تم تصدير الحجوزات بنجاح');
        }

        // دوال واجهة المستخدم
        function populateGovernorates() {
            const select = document.getElementById('governorateSelect');
            select.innerHTML = '<option value="">-- اختر محافظتك --</option>';
            
            for (const governorate in yemenData) {
                const option = document.createElement('option');
                option.value = governorate;
                option.textContent = governorate;
                select.appendChild(option);
            }
            
            // أيضًا لاختيار المحافظة في لوحة التحكم
            const adminSelect = document.getElementById('hotelGovernorate');
            adminSelect.innerHTML = '<option value="">اختر المحافظة</option>';
            
            for (const governorate in yemenData) {
                const option = document.createElement('option');
                option.value = governorate;
                option.textContent = governorate;
                adminSelect.appendChild(option);
            }
        }

        function populateRegions(governorate, targetId) {
            const select = document.getElementById(targetId);
            select.innerHTML = '<option value="">-- اختر منطقتك --</option>';
            
            if (!governorate || !yemenData[governorate]) {
                select.disabled = true;
                return;
            }
            
            select.disabled = false;
            
            for (const region in yemenData[governorate].regions) {
                const option = document.createElement('option');
                option.value = region;
                option.textContent = region;
                select.appendChild(option);
            }
        }

        function loadHotels(governorate, region) {
            const container = document.getElementById('hotels');
    container.innerHTML = '';
    const isMobile = window.innerWidth < 768;
    const columns = isMobile ? 1 : (window.innerWidth < 1024 ? 2 : 3);
    
    container.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            
            if (!governorate || !region || !yemenData[governorate] || !yemenData[governorate].regions[region]) {
                container.innerHTML = '<p style="text-align:center;grid-column:1/-1;padding:20px;">لا توجد فنادق متاحة في هذه المنطقة</p>';
                return;
            }
            
            const hotels = yemenData[governorate].regions[region].hotels;
            
            if (hotels.length === 0) {
                container.innerHTML = '<p style="text-align:center;grid-column:1/-1;padding:20px;">لا توجد فنادق متاحة في هذه المنطقة</p>';
                return;
            }
            
            hotels.forEach(hotel => {
                const card = document.createElement('div');
                card.className = 'hotel-card';
                card.innerHTML = `
                    <img src="${hotel.image}" alt="${hotel.name}" class="hotel-img">
                    <div class="hotel-info">
                        <h3>${hotel.name}</h3>
                        <div class="hotel-meta">
                            <div class="hotel-location">
                                <i class="fas fa-map-marker-alt"></i> ${governorate}, ${region}
                            </div>
                            <div class="hotel-rating">
                                <i class="fas fa-star"></i> ${hotel.rating.toFixed(1)}
                            </div>
                        </div>
                        <p class="hotel-description">${hotel.description}</p>
                        <div class="hotel-price">$${hotel.rooms[0]?.price || '--'} <small>للليلة</small></div>
                        <button onclick="selectHotel(${hotel.id})">
                            <i class="fas fa-search"></i> عرض التفاصيل
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function selectHotel(hotelId) {
            let hotel = null;
            let governorate = '';
            let region = '';
            
            for (const gov in yemenData) {
                for (const reg in yemenData[gov].regions) {
                    const foundHotel = yemenData[gov].regions[reg].hotels.find(h => h.id == hotelId);
                    if (foundHotel) {
                        hotel = foundHotel;
                        governorate = gov;
                        region = reg;
                        break;
                    }
                }
                if (hotel) break;
            }
            
            if (!hotel) {
                alert('الفندق المحدد غير موجود');
                return;
            }
            
            selected.hotel = hotel;
            selected.governorate = governorate;
            selected.region = region;
            
            showRoomDetails(hotel);
            nextStep('step4');
        }

        function showRoomDetails(hotel) {
            const container = document.getElementById('rooms');
            container.innerHTML = '';
            
            if (!hotel || hotel.rooms.length === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد غرف متاحة في هذا الفندق</p>';
                return;
            }
            
            hotel.rooms.forEach(room => {
                const features = [];
                if (room.amenities) features.push(...room.amenities);
                if (room.beds) features.push(room.beds);
                if (room.capacity) features.push(`سعة: ${room.capacity} أشخاص`);
                
                const card = document.createElement('div');
                card.className = 'room-card';
                card.innerHTML = `
                    <div class="room-header">
                        <img src="${room.image}" alt="${room.type}" class="room-image">
                        <div class="room-details">
                            <h3 class="room-title">${room.type}</h3>
                            <div class="room-price">$${room.price} <small>للليلة</small></div>
                            <div class="room-meta">
                                <div class="room-meta-item">
                                    <i class="fas fa-users"></i> ${room.capacity} أشخاص
                                </div>
                                <div class="room-meta-item">
                                    <i class="fas fa-bed"></i> ${room.beds || 'غير محدد'}
                                </div>
                                <div class="room-meta-item">
                                    <i class="fas fa-ruler-combined"></i> ${room.size || 'غير محدد'}
                                </div>
                            </div>
                            <div class="room-features">
                                <h5>مميزات الغرفة:</h5>
                                <div class="features-grid">
                                    <div class="feature-category">
                                        <h5>الأثاث</h5>
                                        <ul class="feature-list">
                                            ${room.contents.furniture.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div class="feature-category">
                                        <h5>الحمام</h5>
                                        <ul class="feature-list">
                                            ${room.contents.bathroom.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div class="feature-category">
                                        <h5>الأجهزة</h5>
                                        <ul class="feature-list">
                                            ${room.contents.electronics.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div class="feature-category">
                                        <h5>الخدمات</h5>
                                        <ul class="feature-list">
                                            ${room.contents.services.map(item => `<li>${item}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <button class="room-book-btn" onclick="selectRoom(${room.id})">
                                <i class="fas fa-calendar-check"></i> احجز الآن
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function selectRoom(roomId) {
            if (!selected.hotel) {
                alert('لم يتم تحديد فندق');
                return;
            }
            
            const room = selected.hotel.rooms.find(r => r.id == roomId);
            if (!room) {
                alert('الغرفة المحددة غير موجودة');
                return;
            }
            
            selected.room = room;
            updateBookingSummary();
            nextStep('step5');
        }

        function updateBookingSummary() {
            const container = document.getElementById('summaryDetails');
            if (!selected.hotel || !selected.room) {
                container.innerHTML = '<p>الرجاء إكمال خطوات الحجز</p>';
                return;
            }
            
            const checkinDate = document.getElementById('checkinDate').value;
            const nights = parseInt(document.getElementById('nights').value) || 1;
            const guests = parseInt(document.getElementById('guests').value) || 1;
            
            const totalPrice = selected.room.price * nights;
            
            container.innerHTML = `
                <div class="summary-item">
                    <span>الفندق:</span>
                    <span>${selected.hotel.name}</span>
                </div>
                <div class="summary-item">
                    <span>الموقع:</span>
                    <span>${selected.governorate}, ${selected.region}</span>
                </div>
                <div class="summary-item">
                    <span>نوع الغرفة:</span>
                    <span>${selected.room.type}</span>
                </div>
                <div class="summary-item">
                    <span>تاريخ الوصول:</span>
                    <span>${checkinDate || 'غير محدد'}</span>
                </div>
                <div class="summary-item">
                    <span>عدد الليالي:</span>
                    <span>${nights}</span>
                </div>
                <div class="summary-item">
                    <span>عدد الأشخاص:</span>
                    <span>${guests}</span>
                </div>
                <div class="summary-item">
                    <span>السعر الإجمالي:</span>
                    <span>$${totalPrice}</span>
                </div>
            `;
        }

        function searchHotels() {
            const searchTerm = document.getElementById('hotelSearch').value.toLowerCase();
            if (!searchTerm) {
                loadHotels(selected.governorate, selected.region);
                return;
            }
            
            const container = document.getElementById('hotels');
            container.innerHTML = '';
            
            let foundHotels = [];
            
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const matchingHotels = yemenData[governorate].regions[region].hotels.filter(hotel => 
                        hotel.name.toLowerCase().includes(searchTerm) || 
                        hotel.description.toLowerCase().includes(searchTerm)
                    );
                    
                    foundHotels = foundHotels.concat(matchingHotels.map(hotel => ({
                        hotel,
                        governorate,
                        region
                    })));
                }
            }
            
            if (foundHotels.length === 0) {
                container.innerHTML = '<p style="text-align:center;grid-column:1/-1;padding:20px;">لا توجد نتائج مطابقة للبحث</p>';
                return;
            }
            
            foundHotels.forEach(({hotel, governorate, region}) => {
                const card = document.createElement('div');
                card.className = 'hotel-card';
                card.innerHTML = `
                    <img src="${hotel.image}" alt="${hotel.name}" class="hotel-img">
                    <div class="hotel-info">
                        <h3>${hotel.name}</h3>
                        <div class="hotel-meta">
                            <div class="hotel-location">
                                <i class="fas fa-map-marker-alt"></i> ${governorate}, ${region}
                            </div>
                            <div class="hotel-rating">
                                <i class="fas fa-star"></i> ${hotel.rating.toFixed(1)}
                            </div>
                        </div>
                        <p class="hotel-description">${hotel.description}</p>
                        <div class="hotel-price">$${hotel.rooms[0]?.price || '--'} <small>للليلة</small></div>
                        <button onclick="selectHotel(${hotel.id})">
                            <i class="fas fa-search"></i> عرض التفاصيل
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function searchAdminHotels() {
            const searchTerm = document.getElementById('searchHotels').value.toLowerCase();
            const container = document.getElementById('hotelsList');
            
            if (!searchTerm) {
                loadAdminHotels();
                return;
            }
            
            container.innerHTML = '';
            let foundHotels = 0;
            
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    yemenData[governorate].regions[region].hotels.forEach(hotel => {
                        if (hotel.name.toLowerCase().includes(searchTerm)) {
                            foundHotels++;
                            const hotelItem = document.createElement('div');
                            hotelItem.className = 'admin-list-item';
                            hotelItem.innerHTML = `
                                <div>
                                    <strong>${hotel.name}</strong> - ${governorate}, ${region}<br>
                                    <small>${'⭐'.repeat(Math.round(hotel.rating))} | ${hotel.rooms.length} غرف</small>
                                </div>
                                <div class="admin-actions">
                                    <button class="admin-btn-small edit-btn" onclick="editHotel(${hotel.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="admin-btn-small delete-btn" onclick="deleteHotel(${hotel.id})">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            `;
                            container.appendChild(hotelItem);
                        }
                    });
                }
            }
            
            if (foundHotels === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد نتائج مطابقة للبحث</p>';
            }
        }

        function searchAdminRooms() {
            const searchTerm = document.getElementById('searchRooms').value.toLowerCase();
            const container = document.getElementById('roomsList');
            
            if (!searchTerm) {
                loadHotelRooms(document.getElementById('roomHotel').value);
                return;
            }
            
            container.innerHTML = '';
            let foundRooms = 0;
            const hotelId = document.getElementById('roomHotel').value;
            
            if (!hotelId) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">الرجاء اختيار فندق أولاً</p>';
                return;
            }
            
            let hotel = null;
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    const foundHotel = yemenData[governorate].regions[region].hotels.find(h => h.id == hotelId);
                    if (foundHotel) {
                        hotel = foundHotel;
                        break;
                    }
                }
                if (hotel) break;
            }
            
            if (!hotel) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">الفندق المحدد غير موجود</p>';
                return;
            }
            
            hotel.rooms.forEach(room => {
                if (room.type.toLowerCase().includes(searchTerm)) {
                    foundRooms++;
                    const roomItem = document.createElement('div');
                    roomItem.className = 'admin-list-item';
                    roomItem.innerHTML = `
                        <div>
                            <strong>${room.type}</strong> - $${room.price}<br>
                            <small>سعة: ${room.capacity} أشخاص | ${room.beds || 'غير محدد'}</small>
                        </div>
                        <div class="admin-actions">
                            <button class="admin-btn-small edit-btn" onclick="editRoom(${hotel.id}, ${room.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="admin-btn-small delete-btn" onclick="deleteRoom(${hotel.id}, ${room.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(roomItem);
                }
            });
            
            if (foundRooms === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد نتائج مطابقة للبحث</p>';
            }
        }

        function searchAdminServices() {
            const searchTerm = document.getElementById('searchServices').value.toLowerCase();
            const container = document.getElementById('servicesList');
            
            if (!searchTerm) {
                loadAdminServices();
                return;
            }
            
            container.innerHTML = '';
            let foundServices = 0;
            
            for (const category in servicesData) {
                servicesData[category].forEach(service => {
                    if (service.name.toLowerCase().includes(searchTerm) || 
                        service.description.toLowerCase().includes(searchTerm)) {
                        foundServices++;
                        const serviceItem = document.createElement('div');
                        serviceItem.className = 'admin-list-item';
                        serviceItem.innerHTML = `
                            <div>
                                <strong>${service.name}</strong> - ${service.governorate}<br>
                                <small>${category} | $${service.price}</small>
                            </div>
                            <div class="admin-actions">
                                <button class="admin-btn-small edit-btn" onclick="editService('${category}', ${service.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="admin-btn-small delete-btn" onclick="deleteService('${category}', ${service.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        `;
                        container.appendChild(serviceItem);
                    }
                });
            }
            
            if (foundServices === 0) {
                container.innerHTML = '<p style="text-align:center;padding:20px;">لا توجد نتائج مطابقة للبحث</p>';
            }
        }

        // دوال خطوات الحجز
        function nextStep(step) {
            // التحقق من صحة البيانات قبل الانتقال للخطوة التالية
            if (currentStep === 'step1') {
                const governorate = document.getElementById('governorateSelect').value;
                if (!governorate) {
                    alert('الرجاء اختيار المحافظة');
                    return;
                }
                selected.governorate = governorate;
            } else if (currentStep === 'step2') {
                const region = document.getElementById('regionSelect').value;
                if (!region) {
                    alert('الرجاء اختيار المنطقة');
                    return;
                }
                selected.region = region;
            } else if (currentStep === 'step5') {
                if (!validateBookingForm()) {
                    return;
                }
            }
            
            // إخفاء الخطوة الحالية
            document.getElementById(currentStep).classList.remove('active');
            document.getElementById(`stepCircle${currentStep.charAt(4)}`).classList.remove('active');
            
            // عرض الخطوة الجديدة
            document.getElementById(step).classList.add('active');
            document.getElementById(`stepCircle${step.charAt(4)}`).classList.add('active');
            
            // تحديث شريط التقدم
            updateProgressBar(step);
            
            // تنفيذ إجراءات خاصة لكل خطوة
            switch(step) {
                case 'step2':
                    populateRegions(selected.governorate, 'regionSelect');
                    document.getElementById('regionSelect').disabled = false;
                    break;
                case 'step3':
                    loadHotels(selected.governorate, selected.region);
                    break;
                case 'step5':
                    updateBookingSummary();
                    break;
            }
            
            currentStep = step;
            
            // التمرير إلى أعلى الصفحة
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function prevStep() {
            // إخفاء الخطوة الحالية
            document.getElementById(currentStep).classList.remove('active');
            document.getElementById(`stepCircle${currentStep.charAt(4)}`).classList.remove('active');
            
            // تحديد الخطوة السابقة
            let prevStepNum = parseInt(currentStep.charAt(4)) - 1;
            if (prevStepNum < 1) prevStepNum = 1;
            const prevStep = 'step' + prevStepNum;
            
            // عرض الخطوة السابقة
            document.getElementById(prevStep).classList.add('active');
            document.getElementById(`stepCircle${prevStepNum}`).classList.add('active');
            
            // تحديث شريط التقدم
            updateProgressBar(prevStep);
            
            currentStep = prevStep;
            
            // التمرير إلى أعلى الصفحة
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgressBar(step) {
            const stepNum = parseInt(step.charAt(4));
            const progress = ((stepNum - 1) / 4) * 100;
            document.getElementById('bookingProgress').style.width = progress + '%';
            
            // تحديث حالة الخطوات
            for (let i = 1; i <= 5; i++) {
                const circle = document.getElementById(`stepCircle${i}`);
                if (i < stepNum) {
                    circle.classList.remove('active');
                    circle.classList.add('completed');
                } else if (i === stepNum) {
                    circle.classList.add('active');
                    circle.classList.remove('completed');
                } else {
                    circle.classList.remove('active');
                    circle.classList.remove('completed');
                }
            }
        }

        function validateBookingForm() {
            let isValid = true;
            
            // التحقق من الاسم
            const fullName = document.getElementById('fullName').value;
            if (!fullName || fullName.split(' ').length < 2) {
                document.getElementById('fullName').classList.add('input-error');
                document.getElementById('nameError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('fullName').classList.remove('input-error');
                document.getElementById('nameError').style.display = 'none';
            }
            
            // التحقق من رقم الجوال
            const phone = document.getElementById('phoneInput').value;
            const phoneRegex = /^7\d{8}$/;
            if (!phoneRegex.test(phone)) {
                document.getElementById('phoneInput').classList.add('input-error');
                document.getElementById('phoneError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('phoneInput').classList.remove('input-error');
                document.getElementById('phoneError').style.display = 'none';
            }
            
            // التحقق من تاريخ الوصول
            const checkinDate = document.getElementById('checkinDate').value;
            if (!checkinDate) {
                document.getElementById('checkinDate').classList.add('input-error');
                document.getElementById('dateError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('checkinDate').classList.remove('input-error');
                document.getElementById('dateError').style.display = 'none';
            }
            
            return isValid;
        }

        function submitBooking() {
            if (!validateBookingForm()) {
                return;
            }
            
            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phoneInput').value;
            const email = document.getElementById('email').value;
            const checkinDate = document.getElementById('checkinDate').value;
            const nights = parseInt(document.getElementById('nights').value) || 1;
            const guests = parseInt(document.getElementById('guests').value) || 1;
            const notes = document.getElementById('notes').value;
            
            const totalPrice = selected.room.price * nights;
            

const booking = {
    id: Date.now(),
    hotelId: selected.hotel.id,
    roomId: selected.room.id,
    customerName: fullName,
    phone: phone,
    email: email,
    checkinDate: checkinDate,
    nights: nights,
    guests: guests,
    totalPrice: totalPrice,
    status: "pending",
    bookingDate: new Date().toISOString().split('T')[0],
    notes: notes,
    reminders: {
        oneDayBefore: false,
        threeDaysBefore: false
    }
};
            
            bookings.push(booking);
            saveDataToStorage();
            
            // إرسال رسالة واتساب
            const whatsappMessage = `مرحباً، أود حجز غرفة في فندق ${selected.hotel.name}\n\n` +
                                   `*تفاصيل الحجز:*\n` +
                                   `- اسم العميل: ${fullName}\n` +
                                   `- رقم الجوال: ${phone}\n` +
                                   `- نوع الغرفة: ${selected.room.type}\n` +
                                   `- تاريخ الوصول: ${checkinDate}\n` +
                                   `- عدد الليالي: ${nights}\n` +
                                   `- عدد الأشخاص: ${guests}\n` +
                                   `- السعر الإجمالي: $${totalPrice}\n\n` +
                                   `ملاحظات: ${notes || 'لا توجد'}`;
            
            const whatsappUrl = `https://wa.me/967782307215?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(whatsappUrl, '_blank');
            
            // عرض رسالة نجاح
            showSuccessMessage('تم إرسال طلب الحجز بنجاح، سيتم التواصل معك قريباً');
            
            // إعادة تعيين النموذج
            resetBookingForm();
        }

        function resetBookingForm() {
            document.getElementById('fullName').value = '';
            document.getElementById('phoneInput').value = '';
            document.getElementById('email').value = '';
            document.getElementById('checkinDate').value = '';
            document.getElementById('nights').value = '1';
            document.getElementById('guests').value = '1';
            document.getElementById('notes').value = '';
            
            selected = {
                governorate: '',
                region: '',
                hotel: null,
                room: null,
                booking: null,
                paymentMethod: null
            };
            
            // العودة إلى الخطوة الأولى
            document.getElementById(currentStep).classList.remove('active');
            document.getElementById(`stepCircle${currentStep.charAt(4)}`).classList.remove('active');
            
            document.getElementById('step1').classList.add('active');
            document.getElementById('stepCircle1').classList.add('active');
            
            updateProgressBar('step1');
            currentStep = 'step1';
            
            // إعادة تعيين اختيارات المحافظة والمنطقة
            document.getElementById('governorateSelect').value = '';
            document.getElementById('regionSelect').value = '';
            document.getElementById('regionSelect').disabled = true;
            
            // إعادة تعيين قائمة الفنادق
            document.getElementById('hotels').innerHTML = '';
        }


        // دوال الخدمات
        function filterServices() {
            currentGovernorate = document.getElementById('serviceGovernorate').value;
            currentServiceType = document.getElementById('serviceType').value;
            loadServices();
        }

        function selectServiceTab(category) {
            currentCategory = category;
            document.querySelectorAll('.service-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.service-tab[data-service="${category}"]`).classList.add('active');
            loadServices();
        }

        function loadServices() {
            const container = document.getElementById('servicesContainer');
            container.innerHTML = '';
            
            let servicesToShow = [];
            
            // جمع جميع الخدمات المطابقة للفلتر
            for (const category in servicesData) {
                if (currentCategory !== 'all' && currentCategory !== category) continue;
                
                servicesData[category].forEach(service => {
                    if ((currentGovernorate === 'all' || service.governorate === currentGovernorate) &&
                        (currentServiceType === 'all' || currentServiceType === category)) {
                        servicesToShow.push({ ...service, category });
                    }
                });
            }
            
            if (servicesToShow.length === 0) {
                container.innerHTML = '<p style="text-align:center;grid-column:1/-1;padding:20px;">لا توجد خدمات متاحة</p>';
                return;
            }
            
            servicesToShow.forEach(service => {
                const card = document.createElement('div');
                card.className = 'service-card';
                card.innerHTML = `
                    <img src="${service.image}" alt="${service.name}" class="service-img">
                    <div class="service-info">
                        <h3>${service.name}</h3>
                        <div class="service-location">
                            <i class="fas fa-map-marker-alt"></i> ${service.governorate}
                        </div>
                        <p class="service-description">${service.description}</p>
                        <ul class="service-features">
                            ${service.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                        <div class="service-price">$${service.price} <small>${service.category === 'تأجير السيارات' ? 'لليوم' : service.category === 'جولات سياحية' ? 'للشخص' : 'للخدمة'}</small></div>
                        <button class="service-btn" onclick="showServiceBookingModal(${service.id}, '${service.category}')">
                            <i class="fas fa-calendar-check"></i> احجز الآن
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function showServiceBookingModal(serviceId, category) {
            const service = servicesData[category].find(s => s.id == serviceId);
            if (!service) return;
            
            document.getElementById('serviceModalTitle').textContent = `حجز خدمة: ${service.name}`;
            
            const modalContent = document.getElementById('serviceModalContent');
            modalContent.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <img src="${service.image}" alt="${service.name}" style="width:100%;border-radius:8px;margin-bottom:15px;">
                    <p>${service.description}</p>
                    <div style="margin:15px 0;">
                        <strong>المحافظة:</strong> ${service.governorate}<br>
                        <strong>السعر:</strong> $${service.price}
                    </div>
                    <div class="form-group">
                        <label for="serviceBookingDate">تاريخ الحجز</label>
                        <input type="date" id="serviceBookingDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="serviceBookingNotes">ملاحظات إضافية</label>
                        <textarea id="serviceBookingNotes" rows="3" class="form-control" placeholder="أي متطلبات أو ملاحظات خاصة"></textarea>
                    </div>
                    <button class="submit-btn" style="width:100%;margin-top:15px;" onclick="bookService(${service.id}, '${category}')">
                        <i class="fab fa-whatsapp"></i> تأكيد الحجز عبر واتساب
                    </button>
                </div>
            `;
            
            document.getElementById('serviceBookingModal').style.display = 'flex';
        }

        function closeServiceModal() {
            document.getElementById('serviceBookingModal').style.display = 'none';
        }

        function bookService(serviceId, category) {
            const service = servicesData[category].find(s => s.id == serviceId);
            if (!service) return;
            
            const bookingDate = document.getElementById('serviceBookingDate').value;
            const notes = document.getElementById('serviceBookingNotes').value;
            
            if (!bookingDate) {
                alert('الرجاء تحديد تاريخ الحجز');
                return;
            }
            
            // حفظ الحجز
            const booking = {
                id: Date.now(),
                serviceId: service.id,
                serviceName: service.name,
                category: category,
                customerName: 'سيتم التأكيد عبر واتساب',
                bookingDate: bookingDate,
                price: service.price,
                governorate: service.governorate,
                notes: notes,
                status: 'pending',
                bookingTime: new Date().toISOString()
            };
            
            serviceBookings.push(booking);
            saveDataToStorage();
            
            // إرسال رسالة واتساب
            const whatsappMessage = `مرحباً، أود حجز خدمة ${service.name}\n\n` +
                                   `*تفاصيل الحجز:*\n` +
                                   `- نوع الخدمة: ${category}\n` +
                                   `- المحافظة: ${service.governorate}\n` +
                                   `- تاريخ الحجز: ${bookingDate}\n` +
                                   `- السعر: $${service.price}\n\n` +
                                   `ملاحظات: ${notes || 'لا توجد'}`;
            
            const whatsappUrl = `https://wa.me/${service.whatsapp}?text=${encodeURIComponent(whatsappMessage)}`;
            window.open(whatsappUrl, '_blank');
            
            // عرض رسالة نجاح
            showSuccessMessage('تم إرسال طلب الحجز بنجاح، سيتم التواصل معك قريباً');
            closeServiceModal();
        }

        // دوال لوحة التحكم
        function toggleAdminPanel() {
            if (!isAdmin && !checkAdminAuth()) {
                return;
            }
            
            document.getElementById('adminPanel').classList.toggle('active');
        }

        function switchAdminTab(tabId) {
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.admin-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelector(`.admin-tab[onclick="switchAdminTab('${tabId}')"]`).classList.add('active');
            document.getElementById(`${tabId}Tab`).classList.add('active');
            
            // تحميل البيانات عند اختيار التبويب
            switch(tabId) {
                case 'bookings':
                    loadBookings();
                    break;
                case 'hotels':
                    loadAdminHotels();
                    loadHotelsForAdmin();
                    break;
                case 'rooms':
                    loadHotelsForAdmin();
                    break;
                case 'services':
                    loadAdminServices();
                    break;
            }
        }

        function loadHotelsForAdmin() {
            const select = document.getElementById('roomHotel');
            select.innerHTML = '<option value="">اختر الفندق</option>';
            
            let hotelsCount = 0;
            
            for (const governorate in yemenData) {
                for (const region in yemenData[governorate].regions) {
                    yemenData[governorate].regions[region].hotels.forEach(hotel => {
                        hotelsCount++;
                        const option = document.createElement('option');
                        option.value = hotel.id;
                        option.textContent = `${hotel.name} - ${governorate}, ${region}`;
                        select.appendChild(option);
                    });
                }
            }
            
            if (hotelsCount === 0) {
                select.innerHTML = '<option value="">لا توجد فنادق مسجلة</option>';
            }
        }
         function checkForUpcomingBookings() {
    const today = new Date();
    bookings.forEach(booking => {
        const checkinDate = new Date(booking.checkinDate);
        const daysDiff = Math.floor((checkinDate - today) / (1000 * 60 * 60 * 24));
        
        // تنبيه قبل 3 أيام (إذا لم يتم إرساله مسبقًا)
        if (daysDiff === 3 && !booking.reminders.threeDaysBefore) {
            sendReminder(booking, 3);
            booking.reminders.threeDaysBefore = true;
        }
        
        // تنبيه قبل يوم واحد (إذا لم يتم إرساله مسبقًا)
        if (daysDiff === 1 && !booking.reminders.oneDayBefore) {
            sendReminder(booking, 1);
            booking.reminders.oneDayBefore = true;
        }
    });
    saveDataToStorage(); // حفظ التحديثات
}

function sendReminder(booking, daysBefore) {
    const message = `⏰ تذكير بحجزك في ${selected.hotel.name}\n\n` +
                   `موعد الوصول: ${booking.checkinDate}\n` +
                   `عدد الليالي: ${booking.nights}\n` +
                   `نوع الغرفة: ${selected.room.type}\n\n` +
                   `تبقى ${daysBefore} يوم${daysBefore > 1 ? 'ان' : ''} على موعد حجزك!`;
    
    // إرسال عبر واتساب (يمكن استبداله برسائل SMS أو بريد إلكتروني)
    const whatsappUrl = `https://wa.me/${booking.phone}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
    
    // أو استخدام خدمة إرسال رسائل مثل Twilio لرسائل SMS تلقائية
    // sendSMS(booking.phone, message);
}

// عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
    // التحقق مرة عند التحميل
    checkForUpcomingBookings();
    
    // جدولة التحقق يوميًا (كل 24 ساعة)
    setInterval(checkForUpcomingBookings, 24 * 60 * 60 * 1000);
});


        // دوال مساعدة
        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function showSuccessMessage(message) {
            const msgElement = document.getElementById('successMessage');
            msgElement.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            msgElement.style.display = 'block';
            
            setTimeout(() => {
                msgElement.style.display = 'none';
            }, 5000);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? '' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const themeBtn = document.getElementById('themeToggle');
            themeBtn.innerHTML = newTheme === 'dark' ? 
                '<i class="fas fa-sun"></i> الثيم الفاتح' : 
                '<i class="fas fa-moon"></i> الثيم الغامق';
        }

        function switchInterface(interfaceId) {
            if (interfaceId === 'hotels') {
                document.getElementById('hotelsInterface').style.display = 'block';
                document.getElementById('servicesInterface').style.display = 'none';
            } else {
                document.getElementById('hotelsInterface').style.display = 'none';
                document.getElementById('servicesInterface').style.display = 'block';
                loadServices();
            }
        }

        // تهيئة الصفحة عند التحميل
        document.addEventListener('DOMContentLoaded', function() {
            // تحميل الثيم المحفوظ
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                const themeBtn = document.getElementById('themeToggle');
                themeBtn.innerHTML = savedTheme === 'dark' ? 
                    '<i class="fas fa-sun"></i> الثيم الفاتح' : 
                    '<i class="fas fa-moon"></i> الثيم الغامق';
            }
            
            // تحميل البيانات المحفوظة
            loadSavedData();
            
            // تهيئة عناصر الواجهة
            populateGovernorates();
            
            // تهيئة منتقي التاريخ
            flatpickr("#checkinDate", {
                minDate: "today",
                dateFormat: "Y-m-d",
                locale: "ar"
            });
            
            // أحداث الأزرار
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('adminToggle').addEventListener('click', toggleAdminPanel);
            document.getElementById('homeLink').addEventListener('click', () => switchInterface('hotels'));
            document.getElementById('servicesLink').addEventListener('click', () => switchInterface('services'));
            
            // أحداث الخدمات في الفوتر
            document.querySelectorAll('.service-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    switchInterface('services');
                    const serviceType = this.getAttribute('data-service');
                    document.getElementById('serviceType').value = serviceType;
                    selectServiceTab(serviceType);
                });
            });
            
            // أحداث النماذج
            document.getElementById('governorateSelect').addEventListener('change', function() {
                const nextBtn = document.querySelector('#step1 .next-btn');
                nextBtn.disabled = !this.value;
                
                if (this.value) {
                    populateRegions(this.value, 'regionSelect');
                }
            });
            
            document.getElementById('regionSelect').addEventListener('change', function() {
                const nextBtn = document.querySelector('#step2 .next-btn');
                nextBtn.disabled = !this.value;
            });
            
            document.getElementById('hotelGovernorate').addEventListener('change', function() {
                populateRegions(this.value, 'hotelRegion');
            });
            
            document.getElementById('bookingForm').addEventListener('submit', function(e) {
                e.preventDefault();
                submitBooking();
            });
            
            // تحديث ملخص الحجز عند تغيير التفاصيل
            document.getElementById('checkinDate').addEventListener('change', updateBookingSummary);
            document.getElementById('nights').addEventListener('change', updateBookingSummary);
            document.getElementById('guests').addEventListener('change', updateBookingSummary);
            
            // تهيئة تبويبات الخدمات
            document.querySelectorAll('.service-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    selectServiceTab(this.getAttribute('data-service'));
                });
            });
// دالة إظهار/إخفاء القائمة المنسدلة
document.getElementById('mobileMenuBtn').addEventListener('click', function() {
    const menu = document.getElementById('mobileMenu');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
});

// دالة لمنع الزوم غير المقصود عند التركيز على الحقول
document.querySelectorAll('input, select, textarea').forEach(el => {
    el.addEventListener('focus', () => {
        window.scrollTo(0, 0);
        document.body.style.zoom = "100%";
    });
});
            
            // عرض واجهة الفنادق افتراضياً
            switchInterface('hotels');
        });
    </script>
</body>
</html>
